<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Aula sobre XML</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="/src/assets/css/base.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body>

<!-- CABEÇALHO -->
<div id="header-placeholder"></div>

<!-- ARTIGOS -->
<section class="container" id="aulas-container">
  <!-- As aulas serão inseridas aqui dinamicamente -->
</section>

<!-- RODAPÉ  -->
<div id="footer-placeholder"></div>

<!-- SCRIPTS -->
<script>
  async function loadComponent(placeholderId, url) {
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error(`Erro ao carregar ${url}`);
      const html = await response.text();
      document.getElementById(placeholderId).innerHTML = html;
    } catch (error) {
      console.error(error);
    }
  }

  async function loadAulas() {
    try {
      const response = await fetch('01-xml.json');
      if (!response.ok) throw new Error('Erro ao carregar as aulas');
      const data = await response.json();
      const container = document.getElementById('aulas-container');

      // Limpa o conteúdo estático
      container.innerHTML = '';

      // Adiciona o título da aula
      const mainArticle = document.createElement('article');
      mainArticle.classList.add('item');
      mainArticle.innerHTML = `<h3>${data.aula}</h3>`;
      container.appendChild(mainArticle);

      // Adiciona os artigos da aula
      data.artigos.forEach(artigo => {
        const articleElement = document.createElement('article');
        articleElement.classList.add('item');

        let content = '';
        if (artigo.titulo) {
          content += `<h2>${artigo.titulo}</h2>`;
        }
        if (artigo.subtitulo) {
          content += `<h5>${artigo.subtitulo}</h5>`;
        }
        if (artigo.texto) {
          content += `<p>${artigo.texto}</p>`;
        }

        articleElement.innerHTML = content;
        container.appendChild(articleElement);
      });
    } catch (error) {
      console.error(error);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    loadComponent('header-placeholder', '/src/assets/js/ui/components/header.html')
      .then(() => {
        const script = document.createElement('script');
        script.src = '/src/assets/js/ui/components/navbar.js';
        document.body.appendChild(script);
      })
      .catch(error => {
        console.error("Erro ao carregar o header:", error);
      });

    loadComponent('footer-placeholder', '/src/assets/js/ui/components/footer.html');
    loadAulas();
  });
</script>

</body>
</html>
<!--curso_html5/06/index.html-->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="icon" type="image/x-icon" href="/src/assets/images/ml5w3s.ico">
  <title>Aula 06 - Armazenamento Local HTML5 | ML5Lab</title>

  <!-- SEO  -->
  <meta name="description" content="Aprenda sobre localStorage e sessionStorage no HTML5 para armazenar dados localmente no navegador, criando aplica√ß√µes web mais interativas e funcionais.">
  <meta name="keywords" content="html5, localStorage, sessionStorage, armazenamento local, web storage, dados persistentes, javascript">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ml5w3s.com.br/">
  <meta http-equiv="content-language" content="pt-BR">

  <!-- OG -->
  <meta property="og:title" content="Aula 06 - Armazenamento Local HTML5 | ML5Lab">
  <meta property="og:description" content="Aprenda sobre localStorage e sessionStorage no HTML5 para armazenar dados localmente no navegador.">
  <meta property="og:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
  <meta property="og:url" content="http://ml5w3s.com.br">
  <meta property="og:type" content="website">

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="/src/assets/css/base.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <style>#exercicios, #controles{display:none;}</style>
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Aula 06 - Armazenamento Local HTML5 | ML5Lab">
  <meta name="twitter:description" content="Aprenda sobre localStorage e sessionStorage no HTML5 para armazenar dados localmente no navegador.">
  <meta name="twitter:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
</head>

<body>

<!-- COMPONENTES -->
<div id="header-placeholder"></div>
<main id="aulas">

<!-- ARTIGOS -->
<section class="container">
<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/src/assets/images/banner_frontend_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/assets/images/banner_frontend_tablet.png">
    <img src="/src/assets/images/banner_frontend_mobile.png">
  </picture>
  <h3>üíæ HTML5 - Armazenamento Local</h3>
</article>
</section>

<section class="container">
<!--INSTRU√á√ïES-->
<article class="item">
  <h3>Web Storage API</h3>
  <p>O HTML5 introduziu a Web Storage API, que permite armazenar dados localmente no navegador do usu√°rio. Isso possibilita criar aplica√ß√µes web mais interativas e funcionais, mesmo offline.</p>
  <h4>Vantagens do Armazenamento Local:</h4>
  <ul class="left_list">
    <li>Dados persistem entre sess√µes</li>
    <li>Melhor performance que cookies</li>
    <li>Maior capacidade de armazenamento</li>
    <li>API simples e intuitiva</li>
    <li>Funciona offline</li>
    <li>Mais seguro que cookies</li>
  </ul>
</article>

<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/src/pages/cursos/html5/06/images/web_storage_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/pages/cursos/html5/06/images/web_storage_tablet.png">
    <img src="/src/pages/cursos/html5/06/images/web_storage_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>localStorage vs sessionStorage</h3>
  <p>Existem dois tipos principais de armazenamento web, cada um com caracter√≠sticas espec√≠ficas de persist√™ncia e escopo.</p>
  <h4>localStorage:</h4>
  <ul class="left_list">
    <li>Dados persistem at√© serem explicitamente removidos</li>
    <li>Sobrevive ao fechamento do navegador</li>
    <li>Compartilhado entre abas do mesmo dom√≠nio</li>
    <li>Capacidade: ~5-10MB</li>
    <li>Ideal para configura√ß√µes e prefer√™ncias</li>
  </ul>
</article>

<article class="item">
  <h4>sessionStorage:</h4>
  <ul class="left_list">
    <li>Dados s√£o removidos ao fechar a aba</li>
    <li>Limitado √† sess√£o atual</li>
    <li>Isolado entre abas diferentes</li>
    <li>Capacidade: ~5-10MB</li>
    <li>Ideal para dados tempor√°rios</li>
  </ul>

  <h4>Exemplo B√°sico:</h4>
  <pre><code>// localStorage
localStorage.setItem('nome', 'Jo√£o');
localStorage.setItem('idade', '25');
let nome = localStorage.getItem('nome');

// sessionStorage
sessionStorage.setItem('sessao', 'ativa');
let sessao = sessionStorage.getItem('sessao');</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>M√©todos da Web Storage API</h3>
  <p>A API Web Storage oferece m√©todos simples para manipular dados armazenados localmente.</p>
  <h4>M√©todos Principais:</h4>
  <ul class="left_list">
    <li>setItem(chave, valor) - Armazena dados</li>
    <li>getItem(chave) - Recupera dados</li>
    <li>removeItem(chave) - Remove item espec√≠fico</li>
    <li>clear() - Remove todos os dados</li>
    <li>key(√≠ndice) - Retorna chave por posi√ß√£o</li>
    <li>length - N√∫mero de itens armazenados</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo Completo:</h4>
  <pre><code>// Armazenar dados
localStorage.setItem('usuario', 'Maria');
localStorage.setItem('tema', 'escuro');
localStorage.setItem('configuracoes', JSON.stringify({
  idioma: 'pt-BR',
  notificacoes: true
}));

// Recuperar dados
let usuario = localStorage.getItem('usuario');
let config = JSON.parse(localStorage.getItem('configuracoes'));

// Remover dados
localStorage.removeItem('tema');

// Limpar tudo
localStorage.clear();</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Trabalhando com Objetos</h3>
  <p>Como o Web Storage s√≥ armazena strings, √© necess√°rio converter objetos JavaScript usando JSON para armazen√°-los.</p>
  <h4>Convers√£o de Dados:</h4>
  <ul class="left_list">
    <li>JSON.stringify() - Objeto para string</li>
    <li>JSON.parse() - String para objeto</li>
    <li>Tratamento de erros importante</li>
    <li>Valida√ß√£o de dados</li>
  </ul>
</article>

<article class="item">
  <h4>Fun√ß√µes Utilit√°rias:</h4>
  <pre><code>// Salvar objeto
function salvarObjeto(chave, objeto) {
  try {
    localStorage.setItem(chave, JSON.stringify(objeto));
    return true;
  } catch (error) {
    console.error('Erro ao salvar:', error);
    return false;
  }
}

// Carregar objeto
function carregarObjeto(chave) {
  try {
    const dados = localStorage.getItem(chave);
    return dados ? JSON.parse(dados) : null;
  } catch (error) {
    console.error('Erro ao carregar:', error);
    return null;
  }
}</code></pre>

  <picture>
    <source media="(min-width: 1024px)" srcset="/src/pages/cursos/html5/06/images/objetos_json_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/pages/cursos/html5/06/images/objetos_json_tablet.png">
    <img src="/src/pages/cursos/html5/06/images/objetos_json_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Eventos de Storage</h3>
  <p>O Web Storage dispara eventos quando os dados s√£o modificados, permitindo sincroniza√ß√£o entre abas e componentes.</p>
  <h4>Evento storage:</h4>
  <ul class="left_list">
    <li>Disparado quando dados s√£o modificados</li>
    <li>Funciona entre abas do mesmo dom√≠nio</li>
    <li>N√£o dispara na aba que fez a mudan√ßa</li>
    <li>Propriedades: key, oldValue, newValue</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo de Uso:</h4>
  <pre><code>// Escutar mudan√ßas
window.addEventListener('storage', function(event) {
  if (event.key === 'usuario') {
    console.log('Usu√°rio mudou de', event.oldValue, 'para', event.newValue);
    // Atualizar interface
    atualizarInterface(event.newValue);
  }
});

// Simular mudan√ßa
localStorage.setItem('usuario', 'Novo Usu√°rio');

// Fun√ß√£o para atualizar interface
function atualizarInterface(usuario) {
  document.getElementById('nomeUsuario').textContent = usuario;
}</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Casos de Uso Pr√°ticos</h3>
  <p>O armazenamento local √© √∫til em diversas situa√ß√µes, desde configura√ß√µes simples at√© dados complexos de aplica√ß√£o.</p>
  <h4>Aplica√ß√µes Comuns:</h4>
  <ul class="left_list">
    <li>Prefer√™ncias do usu√°rio</li>
    <li>Carrinho de compras tempor√°rio</li>
    <li>Dados de formul√°rio</li>
    <li>Cache de dados da API</li>
    <li>Configura√ß√µes de tema</li>
    <li>Hist√≥rico de navega√ß√£o</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo: Sistema de Prefer√™ncias:</h4>
  <pre><code>// Configura√ß√µes padr√£o
const configPadrao = {
  tema: 'claro',
  idioma: 'pt-BR',
  notificacoes: true,
  tamanhoFonte: 'normal'
};

// Carregar configura√ß√µes
function carregarConfiguracoes() {
  const config = localStorage.getItem('configuracoes');
  return config ? JSON.parse(config) : configPadrao;
}

// Salvar configura√ß√µes
function salvarConfiguracoes(config) {
  localStorage.setItem('configuracoes', JSON.stringify(config));
  aplicarConfiguracoes(config);
}

// Aplicar configura√ß√µes
function aplicarConfiguracoes(config) {
  document.body.className = config.tema;
  document.documentElement.lang = config.idioma;
  // ... outras aplica√ß√µes
}</code></pre>

  <picture>
    <source media="(min-width: 1024px)" srcset="/src/pages/cursos/html5/06/images/casos_uso_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/pages/cursos/html5/06/images/casos_uso_tablet.png">
    <img src="/src/pages/cursos/html5/06/images/casos_uso_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Limita√ß√µes e Considera√ß√µes</h3>
  <p>Embora poderoso, o Web Storage tem limita√ß√µes que devem ser consideradas ao desenvolver aplica√ß√µes.</p>
  <h4>Limita√ß√µes:</h4>
  <ul class="left_list">
    <li>Capacidade limitada (~5-10MB)</li>
    <li>S√≥ armazena strings</li>
    <li>Pode ser limpo pelo usu√°rio</li>
    <li>Modo inc√≥gnito pode n√£o funcionar</li>
    <li>Limitado ao mesmo dom√≠nio</li>
  </ul>
</article>

<article class="item">
  <h4>Boas Pr√°ticas:</h4>
  <ul class="left_list">
    <li>Sempre tratar erros de armazenamento</li>
    <li>Verificar se o storage est√° dispon√≠vel</li>
    <li>N√£o armazenar dados sens√≠veis</li>
    <li>Implementar fallbacks para dados importantes</li>
    <li>Limpar dados desnecess√°rios</li>
    <li>Usar nomes de chaves descritivos</li>
  </ul>

  <h4>Verifica√ß√£o de Suporte:</h4>
  <pre><code>if (typeof(Storage) !== "undefined") {
  // Web Storage √© suportado
  localStorage.setItem('teste', 'funciona');
} else {
  // Fallback para cookies ou outras solu√ß√µes
  console.log('Web Storage n√£o suportado');
}</code></pre>
</article>
</section>

<span id="exercicio">
<p>Crie uma aplica√ß√£o usando Web Storage com:<p>
  <ul>
  <li>T√≠tulo = Aplica√ß√£o com Armazenamento Local<br></li>
  <li>Configura√ß√µes = Sistema de prefer√™ncias do usu√°rio<br></li>
  <li>Dados = Formul√°rio que salva dados automaticamente<br></li>
  <li>Sincroniza√ß√£o = Eventos para sincronizar entre abas<br></li>
  <li>Persist√™ncia = Dados que sobrevivem ao fechamento<br></li>
  <li>Interface = Bot√µes para salvar, carregar e limpar dados<br></li>
</ul>
</p>Implemente tratamento de erros e verifica√ß√£o de suporte do navegador.</p>
</span>

  <form id="controles">
    <fieldset>
      <legend>Controles</legend>
    <h4>Escolha um template</h4>
    <select id="templateSelect">
      <option value="/vitrine-ml5/mlab5/templates/classico.html">Classico</option>
      <option value="/vitrine-ml5/mlab5/templates/moderno.html">Moderno</option>
      <option value="/vitrine-ml5/mlab5/templates/dark_mode.html">Dark Mode3</option>
    </select>

    <h4>Personalize</h4>
    <label>Cor de fundo: <input type="color" id="bgColor" value="#ffffff"></label><br>
    <label>Cor do texto: <input type="color" id="textColor" value="#000000"></label><br><br>

    <label>Fonte:
      <select id="fontFamily">
        <option value="Arial, sans-serif">Arial</option>
        <option value="Georgia, serif">Georgia</option>
        <option value="'Courier New', monospace">Courier New</option>
      </select><br>
    </label><br><br>
    </fieldset><br>
    <button onclick="salvarCustomizacao()">Salvar e Visualizar</button>
  </form>

<section class="container">
<article class="item">
    <a href="/src/pages/playground" id="download-button" class="btn-large waves-effect waves-light teal lighten-1" >Playground</a>
</article>
</section>

</main>

<div id="footer-placeholder"></div>

<script>
  async function loadComponent(placeholderId, url) {
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error(`Erro ao carregar ${url}`);
      const html = await response.text();
      document.getElementById(placeholderId).innerHTML = html;
    } catch (error) {
      console.error(error);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    loadComponent('header-placeholder', '/src/assets/js/ui/components/header.html')
      .then(() => {
        const script = document.createElement('script');
        script.src = '/src/assets/js/ui/components/navbar.js';
        document.body.appendChild(script);
      })
      .catch(error => {
        console.error("Erro ao carregar o header:", error);
      });

    loadComponent('footer-placeholder', '/src/assets/js/ui/components/footer.html');
  });

  document.addEventListener('DOMContentLoaded', () => {
    const exercicio = document.getElementById('exercicio')?.innerText || "";
    const playgroundLink = document.querySelector('a[href="/src/pages/playground"]'); 

    if (playgroundLink) {
      playgroundLink.addEventListener('click', (event) => {
        event.preventDefault();

        // Salva o texto das instru√ß√µes
        localStorage.setItem('instrucoes', exercicio);

        // Salva o HTML do formul√°rio inteiro
        const controles = document.getElementById('controles');
        localStorage.setItem('ajustes', controles.outerHTML);

        // Redireciona para o playground
        window.location.href = playgroundLink.href;
      });
    }
  });
</script>

</body>
</html>

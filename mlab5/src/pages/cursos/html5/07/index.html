<!--curso_html5/07/index.html-->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="icon" type="image/x-icon" href="/src/assets/images/ml5w3s.ico">
  <title>Aula 07 - Geolocaliza√ß√£o e APIs Web HTML5 | ML5Lab</title>

  <!-- SEO  -->
  <meta name="description" content="Aprenda sobre a API de Geolocaliza√ß√£o do HTML5 e outras APIs web modernas para criar aplica√ß√µes que utilizam localiza√ß√£o e recursos do dispositivo.">
  <meta name="keywords" content="html5, geolocaliza√ß√£o, geolocation api, apis web, localiza√ß√£o, gps, coordenadas, navegador">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ml5w3s.com.br/">
  <meta http-equiv="content-language" content="pt-BR">

  <!-- OG -->
  <meta property="og:title" content="Aula 07 - Geolocaliza√ß√£o e APIs Web HTML5 | ML5Lab">
  <meta property="og:description" content="Aprenda sobre a API de Geolocaliza√ß√£o do HTML5 e outras APIs web modernas para criar aplica√ß√µes que utilizam localiza√ß√£o.">
  <meta property="og:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
  <meta property="og:url" content="http://ml5w3s.com.br">
  <meta property="og:type" content="website">

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="/src/assets/css/base.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <style>#exercicios, #controles{display:none;}</style>
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Aula 07 - Geolocaliza√ß√£o e APIs Web HTML5 | ML5Lab">
  <meta name="twitter:description" content="Aprenda sobre a API de Geolocaliza√ß√£o do HTML5 e outras APIs web modernas para criar aplica√ß√µes que utilizam localiza√ß√£o.">
  <meta name="twitter:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
</head>

<body>

<!-- COMPONENTES -->
<div id="header-placeholder"></div>
<main id="aulas">

<!-- ARTIGOS -->
<section class="container">
<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/src/assets/images/banner_frontend_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/assets/images/banner_frontend_tablet.png">
    <img src="/src/assets/images/banner_frontend_mobile.png">
  </picture>
  <h3>üåç HTML5 - Geolocaliza√ß√£o e APIs Web</h3>
</article>
</section>

<section class="container">
<!--INSTRU√á√ïES-->
<article class="item">
  <h3>Geolocation API</h3>
  <p>A Geolocation API permite que aplica√ß√µes web acessem a localiza√ß√£o geogr√°fica do usu√°rio, criando experi√™ncias personalizadas baseadas em localiza√ß√£o. √â uma das APIs mais √∫teis para aplica√ß√µes modernas.</p>
  <h4>Caracter√≠sticas da API:</h4>
  <ul class="left_list">
    <li>Acesso √† localiza√ß√£o GPS</li>
    <li>Rede de torres de celular</li>
    <li>Pontos de acesso WiFi</li>
    <li>IP aproximado</li>
    <li>Precis√£o vari√°vel</li>
    <li>Requer permiss√£o do usu√°rio</li>
  </ul>
</article>

<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/src/pages/cursos/html5/07/images/geolocalizacao_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/pages/cursos/html5/07/images/geolocalizacao_tablet.png">
    <img src="/src/pages/cursos/html5/07/images/geolocalizacao_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>M√©todo getCurrentPosition()</h3>
  <p>O m√©todo principal para obter a localiza√ß√£o atual do usu√°rio. √â ass√≠ncrono e retorna as coordenadas via callback.</p>
  <h4>Par√¢metros:</h4>
  <ul class="left_list">
    <li>successCallback - Fun√ß√£o de sucesso</li>
    <li>errorCallback - Fun√ß√£o de erro (opcional)</li>
    <li>options - Op√ß√µes de configura√ß√£o (opcional)</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo B√°sico:</h4>
  <pre><code>function obterLocalizacao() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      function(position) {
        const lat = position.coords.latitude;
        const lng = position.coords.longitude;
        console.log('Latitude:', lat);
        console.log('Longitude:', lng);
        console.log('Precis√£o:', position.coords.accuracy);
      },
      function(error) {
        console.error('Erro:', error.message);
      }
    );
  } else {
    console.log('Geolocaliza√ß√£o n√£o suportada');
  }
}</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Objeto Position</h3>
  <p>O objeto retornado cont√©m informa√ß√µes detalhadas sobre a localiza√ß√£o e a precis√£o da medi√ß√£o.</p>
  <h4>Propriedades do Position:</h4>
  <ul class="left_list">
    <li>coords.latitude - Latitude em graus</li>
    <li>coords.longitude - Longitude em graus</li>
    <li>coords.accuracy - Precis√£o em metros</li>
    <li>coords.altitude - Altitude em metros</li>
    <li>coords.altitudeAccuracy - Precis√£o da altitude</li>
    <li>coords.heading - Dire√ß√£o em graus</li>
    <li>coords.speed - Velocidade em m/s</li>
    <li>timestamp - Data/hora da medi√ß√£o</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo Detalhado:</h4>
  <pre><code>function exibirLocalizacao(position) {
  const coords = position.coords;
  
  console.log('Coordenadas:', {
    latitude: coords.latitude,
    longitude: coords.longitude,
    precisao: coords.accuracy + ' metros',
    altitude: coords.altitude || 'N/A',
    velocidade: coords.speed || 'N/A',
    timestamp: new Date(position.timestamp)
  });
  
  // Exibir no mapa
  mostrarNoMapa(coords.latitude, coords.longitude);
}</code></pre>

  <picture>
    <source media="(min-width: 1024px)" srcset="/src/pages/cursos/html5/07/images/objeto_position_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/pages/cursos/html5/07/images/objeto_position_tablet.png">
    <img src="/src/pages/cursos/html5/07/images/objeto_position_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Op√ß√µes de Configura√ß√£o</h3>
  <p>As op√ß√µes permitem controlar como a localiza√ß√£o √© obtida, balanceando precis√£o, velocidade e consumo de bateria.</p>
  <h4>Propriedades das Options:</h4>
  <ul class="left_list">
    <li>enableHighAccuracy - Alta precis√£o (GPS)</li>
    <li>timeout - Tempo limite em ms</li>
    <li>maximumAge - Cache m√°ximo em ms</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo com Op√ß√µes:</h4>
  <pre><code>const opcoes = {
  enableHighAccuracy: true,    // Usar GPS
  timeout: 10000,              // 10 segundos
  maximumAge: 60000            // Cache de 1 minuto
};

navigator.geolocation.getCurrentPosition(
  function(position) {
    // Localiza√ß√£o obtida com alta precis√£o
    console.log('GPS ativo:', position.coords);
  },
  function(error) {
    console.error('Erro ou timeout:', error.message);
  },
  opcoes
);</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Monitoramento Cont√≠nuo</h3>
  <p>Para aplica√ß√µes que precisam acompanhar mudan√ßas de localiza√ß√£o, use watchPosition() em vez de getCurrentPosition().</p>
  <h4>M√©todo watchPosition():</h4>
  <ul class="left_list">
    <li>Monitora mudan√ßas de posi√ß√£o</li>
    <li>Retorna ID para parar monitoramento</li>
    <li>Ideal para navega√ß√£o</li>
    <li>Consome mais bateria</li>
    <li>Para com clearWatch()</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo de Monitoramento:</h4>
  <pre><code>let watchId = null;

function iniciarMonitoramento() {
  watchId = navigator.geolocation.watchPosition(
    function(position) {
      atualizarPosicao(position);
    },
    function(error) {
      console.error('Erro no monitoramento:', error);
    },
    { enableHighAccuracy: true, timeout: 5000 }
  );
}

function pararMonitoramento() {
  if (watchId) {
    navigator.geolocation.clearWatch(watchId);
    watchId = null;
  }
}</code></pre>

  <picture>
    <source media="(min-width: 1024px)" srcset="/src/pages/cursos/html5/07/images/monitoramento_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/pages/cursos/html5/07/images/monitoramento_tablet.png">
    <img src="/src/pages/cursos/html5/07/images/monitoramento_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Tratamento de Erros</h3>
  <p>√â essencial tratar adequadamente os erros de geolocaliza√ß√£o para proporcionar uma boa experi√™ncia ao usu√°rio.</p>
  <h4>C√≥digos de Erro:</h4>
  <ul class="left_list">
    <li>PERMISSION_DENIED (1) - Usu√°rio negou permiss√£o</li>
    <li>POSITION_UNAVAILABLE (2) - Localiza√ß√£o indispon√≠vel</li>
    <li>TIMEOUT (3) - Tempo limite excedido</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo de Tratamento:</h4>
  <pre><code>function tratarErroGeolocalizacao(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      alert('Permiss√£o de localiza√ß√£o negada. Ative nas configura√ß√µes.');
      break;
    case error.POSITION_UNAVAILABLE:
      alert('Localiza√ß√£o indispon√≠vel. Verifique o GPS.');
      break;
    case error.TIMEOUT:
      alert('Tempo limite excedido. Tente novamente.');
      break;
    default:
      alert('Erro desconhecido na geolocaliza√ß√£o.');
      break;
  }
}</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Outras APIs Web HTML5</h3>
  <p>Al√©m da geolocaliza√ß√£o, o HTML5 introduziu v√°rias outras APIs que expandem as capacidades das aplica√ß√µes web.</p>
  <h4>APIs Importantes:</h4>
  <ul class="left_list">
    <li>Device Orientation - Orienta√ß√£o do dispositivo</li>
    <li>Vibration API - Vibra√ß√£o do dispositivo</li>
    <li>Battery API - Status da bateria</li>
    <li>Network Information - Conex√£o de rede</li>
    <li>Page Visibility - Visibilidade da p√°gina</li>
    <li>Fullscreen API - Tela cheia</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo: Device Orientation:</h4>
  <pre><code>// Detectar orienta√ß√£o do dispositivo
window.addEventListener('deviceorientation', function(event) {
  const alpha = event.alpha; // Rota√ß√£o Z
  const beta = event.beta;   // Rota√ß√£o X
  const gamma = event.gamma; // Rota√ß√£o Y
  
  console.log('Orienta√ß√£o:', { alpha, beta, gamma });
});

// Detectar movimento
window.addEventListener('devicemotion', function(event) {
  const acceleration = event.acceleration;
  const rotation = event.rotationRate;
  
  console.log('Movimento:', { acceleration, rotation });
});</code></pre>

  <picture>
    <source media="(min-width: 1024px)" srcset="/src/pages/cursos/html5/07/images/outras_apis_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/pages/cursos/html5/07/images/outras_apis_tablet.png">
    <img src="/src/pages/cursos/html5/07/images/outras_apis_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Casos de Uso Pr√°ticos</h3>
  <p>A geolocaliza√ß√£o e outras APIs web abrem possibilidades para diversos tipos de aplica√ß√µes.</p>
  <h4>Aplica√ß√µes Comuns:</h4>
  <ul class="left_list">
    <li>Mapas e navega√ß√£o</li>
    <li>Encontrar restaurantes pr√≥ximos</li>
    <li>Jogos baseados em localiza√ß√£o</li>
    <li>Redes sociais com check-ins</li>
    <li>Aplicativos de clima local</li>
    <li>Rastreamento de fitness</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo: App de Clima Local:</h4>
  <pre><code>function obterClimaLocal() {
  navigator.geolocation.getCurrentPosition(
    function(position) {
      const { latitude, longitude } = position.coords;
      
      // Buscar clima pela API
      fetch(`/api/clima?lat=${latitude}&lon=${longitude}`)
        .then(response => response.json())
        .then(dados => {
          exibirClima(dados);
        })
        .catch(error => {
          console.error('Erro ao buscar clima:', error);
        });
    },
    function(error) {
      // Fallback para cidade padr√£o
      obterClimaPorCidade('S√£o Paulo');
    }
  );
}</code></pre>
</article>
</section>

<span id="exercicio">
<p>Crie uma aplica√ß√£o usando Geolocaliza√ß√£o e APIs Web com:<p>
  <ul>
  <li>T√≠tulo = Aplica√ß√£o com Geolocaliza√ß√£o<br></li>
  <li>Localiza√ß√£o = Obter e exibir coordenadas do usu√°rio<br></li>
  <li>Monitoramento = Acompanhar mudan√ßas de posi√ß√£o<br></li>
  <li>Mapa = Integrar com servi√ßo de mapas<br></li>
  <li>APIs Extras = Usar Device Orientation ou outras APIs<br></li>
  <li>Tratamento = Implementar tratamento de erros completo<br></li>
</ul>
</p>Implemente interface para controlar monitoramento e exibir dados em tempo real.</p>
</span>

  <form id="controles">
    <fieldset>
      <legend>Controles</legend>
    <h4>Escolha um template</h4>
    <select id="templateSelect">
      <option value="/vitrine-ml5/mlab5/templates/classico.html">Classico</option>
      <option value="/vitrine-ml5/mlab5/templates/moderno.html">Moderno</option>
      <option value="/vitrine-ml5/mlab5/templates/dark_mode.html">Dark Mode3</option>
    </select>

    <h4>Personalize</h4>
    <label>Cor de fundo: <input type="color" id="bgColor" value="#ffffff"></label><br>
    <label>Cor do texto: <input type="color" id="textColor" value="#000000"></label><br><br>

    <label>Fonte:
      <select id="fontFamily">
        <option value="Arial, sans-serif">Arial</option>
        <option value="Georgia, serif">Georgia</option>
        <option value="'Courier New', monospace">Courier New</option>
      </select><br>
    </label><br><br>
    </fieldset><br>
    <button onclick="salvarCustomizacao()">Salvar e Visualizar</button>
  </form>

<section class="container">
<article class="item">
    <a href="/src/pages/playground" id="download-button" class="btn-large waves-effect waves-light teal lighten-1" >Playground</a>
</article>
</section>

</main>

<div id="footer-placeholder"></div>

<script>
  async function loadComponent(placeholderId, url) {
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error(`Erro ao carregar ${url}`);
      const html = await response.text();
      document.getElementById(placeholderId).innerHTML = html;
    } catch (error) {
      console.error(error);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    loadComponent('header-placeholder', '/src/assets/js/ui/components/header.html')
      .then(() => {
        const script = document.createElement('script');
        script.src = '/src/assets/js/ui/components/navbar.js';
        document.body.appendChild(script);
      })
      .catch(error => {
        console.error("Erro ao carregar o header:", error);
      });

    loadComponent('footer-placeholder', '/src/assets/js/ui/components/footer.html');
  });

  document.addEventListener('DOMContentLoaded', () => {
    const exercicio = document.getElementById('exercicio')?.innerText || "";
    const playgroundLink = document.querySelector('a[href="/src/pages/playground"]'); 

    if (playgroundLink) {
      playgroundLink.addEventListener('click', (event) => {
        event.preventDefault();

        // Salva o texto das instru√ß√µes
        localStorage.setItem('instrucoes', exercicio);

        // Salva o HTML do formul√°rio inteiro
        const controles = document.getElementById('controles');
        localStorage.setItem('ajustes', controles.outerHTML);

        // Redireciona para o playground
        window.location.href = playgroundLink.href;
      });
    }
  });
</script>

</body>
</html>

<!--curso_javascript/04/index.html-->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="icon" type="image/x-icon" href="/src/assets/images/ml5w3s.ico">
  <title>Aula 04 - DOM e Eventos Modernos | ML5Lab</title>

  <!-- SEO  -->
  <meta name="description" content="Aprenda manipula√ß√£o moderna do DOM: querySelector, eventos, classList, dataset e delega√ß√£o de eventos para interfaces interativas.">
  <meta name="keywords" content="javascript, dom, eventos, queryselector, classlist, dataset, delega√ß√£o, manipula√ß√£o dom">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ml5w3s.com.br/">
  <meta http-equiv="content-language" content="pt-BR">

  <!-- OG -->
  <meta property="og:title" content="Aula 04 - DOM e Eventos Modernos | ML5Lab">
  <meta property="og:description" content="Aprenda manipula√ß√£o moderna do DOM: querySelector, eventos, classList, dataset e delega√ß√£o de eventos para interfaces interativas.">
  <meta property="og:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
  <meta property="og:url" content="http://ml5w3s.com.br">
  <meta property="og:type" content="website">

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="/src/assets/css/base.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <style>#exercicios, #controles{display:none;}</style>
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Aula 04 - DOM e Eventos Modernos | ML5Lab">
  <meta name="twitter:description" content="Aprenda manipula√ß√£o moderna do DOM: querySelector, eventos, classList, dataset e delega√ß√£o de eventos para interfaces interativas.">
  <meta name="twitter:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
</head>

<body>

<!-- COMPONENTES -->
<div id="header-placeholder"></div>
<main id="aulas">

<!-- ARTIGOS -->
<section class="container">
<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/src/assets/images/banner_frontend_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/assets/images/banner_frontend_tablet.png">
    <img src="/src/assets/images/banner_frontend_mobile.png">
  </picture>
  <h3>üåê DOM e Eventos Modernos</h3>
</article>
</section>

<section class="container">
<!--INSTRU√á√ïES-->
<article class="item">
  <h3>Manipula√ß√£o Moderna do DOM</h3>
  <p>O DOM (Document Object Model) √© a representa√ß√£o em √°rvore da estrutura HTML, permitindo que JavaScript manipule elementos, estilos e comportamentos de forma din√¢mica e eficiente.</p>
  <h4>Conceitos Fundamentais:</h4>
  <ul class="left_list">
    <li><strong>DOM como √°rvore:</strong> Estrutura hier√°rquica de n√≥s</li>
    <li><strong>Seletores modernos:</strong> querySelector e querySelectorAll</li>
    <li><strong>Manipula√ß√£o de classes:</strong> classList API</li>
    <li><strong>Dataset:</strong> Acesso a data-* attributes</li>
    <li><strong>Delega√ß√£o de eventos:</strong> Performance otimizada</li>
  </ul>
</article>

<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/src/pages/cursos/javascript/04/images/dom_moderno_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/pages/cursos/javascript/04/images/dom_moderno_tablet.png">
    <img src="/src/pages/cursos/javascript/04/images/dom_moderno_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Seletores Modernos: querySelector e querySelectorAll</h3>
  <p>Os m√©todos <code>querySelector</code> e <code>querySelectorAll</code> revolucionaram a sele√ß√£o de elementos, permitindo usar seletores CSS avan√ßados de forma nativa.</p>
  <h4>Vantagens dos Seletores Modernos:</h4>
  <ul class="left_list">
    <li>Sintaxe CSS familiar</li>
    <li>Seletores complexos em uma √∫nica chamada</li>
    <li>Performance otimizada</li>
    <li>Suporte a pseudo-seletores</li>
    <li>Flexibilidade m√°xima</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplos de Seletores Modernos:</h4>
  <pre><code>// ‚úÖ Seletores b√°sicos
const titulo = document.querySelector('h1');
const paragrafos = document.querySelectorAll('p');
const botao = document.querySelector('#meu-botao');
const elementos = document.querySelectorAll('.classe-especial');

// ‚úÖ Seletores complexos
const primeiroParagrafo = document.querySelector('p:first-child');
const ultimoItem = document.querySelector('li:last-child');
const elementosPares = document.querySelectorAll('tr:nth-child(even)');
const inputAtivo = document.querySelector('input:focus');

// ‚úÖ Seletores de atributos
const linksExternos = document.querySelectorAll('a[href^="http"]');
const inputsObrigatorios = document.querySelectorAll('input[required]');
const elementosComData = document.querySelectorAll('[data-toggle]');

// ‚úÖ Seletores combinados
const paragrafosEmDiv = document.querySelectorAll('div p');
const filhosDiretos = document.querySelectorAll('ul > li');
const elementosAdjacentes = document.querySelectorAll('h1 + p');

// ‚úÖ Seletores de pseudo-classes
const elementoHover = document.querySelector('button:hover');
const checkboxMarcado = document.querySelector('input[type="checkbox"]:checked');
const primeiroFilho = document.querySelector('.container > *:first-child');

// ‚úÖ Busca dentro de elementos espec√≠ficos
const container = document.querySelector('.container');
const elementosInternos = container.querySelectorAll('.item');
const primeiroInterno = container.querySelector(':first-child');

// ‚úÖ Exemplo pr√°tico: selecionar elementos de um formul√°rio
const formulario = document.querySelector('#formulario-contato');
const inputs = formulario.querySelectorAll('input[type="text"], input[type="email"]');
const botaoEnviar = formulario.querySelector('button[type="submit"]');
const mensagens = formulario.querySelectorAll('.mensagem-erro');

// ‚úÖ Converter NodeList para Array (se necess√°rio)
const elementosArray = Array.from(document.querySelectorAll('.item'));
// ou usando spread operator
const elementosSpread = [...document.querySelectorAll('.item')];

// ‚úÖ Verificar se elemento existe
const elemento = document.querySelector('.elemento-inexistente');
if (elemento) {
  console.log('Elemento encontrado:', elemento);
} else {
  console.log('Elemento n√£o encontrado');
}</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Manipula√ß√£o de Classes com classList</h3>
  <p>A API <code>classList</code> oferece m√©todos modernos e eficientes para manipular classes CSS, substituindo o antigo <code>className</code> por uma interface mais robusta.</p>
  <h4>M√©todos do classList:</h4>
  <ul class="left_list">
    <li><code>add()</code> - Adiciona classes</li>
    <li><code>remove()</code> - Remove classes</li>
    <li><code>toggle()</code> - Alterna classes</li>
    <li><code>contains()</code> - Verifica se classe existe</li>
    <li><code>replace()</code> - Substitui uma classe por outra</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplos de classList:</h4>
  <pre><code>// ‚úÖ Manipula√ß√£o b√°sica de classes
const elemento = document.querySelector('.meu-elemento');

// Adicionar classes
elemento.classList.add('ativo', 'destaque');
elemento.classList.add('nova-classe');

// Remover classes
elemento.classList.remove('inativo');
elemento.classList.remove('classe-antiga', 'outra-classe');

// Alternar classe (toggle)
elemento.classList.toggle('visivel');
elemento.classList.toggle('escondido', true); // for√ßa adicionar
elemento.classList.toggle('escondido', false); // for√ßa remover

// Verificar se classe existe
if (elemento.classList.contains('ativo')) {
  console.log('Elemento est√° ativo');
}

// Substituir classe
elemento.classList.replace('classe-antiga', 'classe-nova');

// ‚úÖ Exemplo pr√°tico: menu responsivo
const menuToggle = document.querySelector('.menu-toggle');
const menu = document.querySelector('.menu');
const overlay = document.querySelector('.overlay');

menuToggle.addEventListener('click', () => {
  menu.classList.toggle('aberto');
  overlay.classList.toggle('visivel');
  menuToggle.classList.toggle('ativo');
  
  // Alternar aria-expanded para acessibilidade
  const isOpen = menu.classList.contains('aberto');
  menuToggle.setAttribute('aria-expanded', isOpen);
});

// ‚úÖ Exemplo: sistema de tabs
const tabButtons = document.querySelectorAll('.tab-button');
const tabContents = document.querySelectorAll('.tab-content');

tabButtons.forEach(button => {
  button.addEventListener('click', () => {
    const targetTab = button.dataset.tab;
    
    // Remover classe ativa de todos os bot√µes e conte√∫dos
    tabButtons.forEach(btn => btn.classList.remove('ativo'));
    tabContents.forEach(content => content.classList.remove('ativo'));
    
    // Adicionar classe ativa ao bot√£o clicado e conte√∫do correspondente
    button.classList.add('ativo');
    document.querySelector(`[data-content="${targetTab}"]`).classList.add('ativo');
  });
});

// ‚úÖ Exemplo: tema escuro/claro
const themeToggle = document.querySelector('.theme-toggle');
const body = document.body;

themeToggle.addEventListener('click', () => {
  body.classList.toggle('tema-escuro');
  
  // Salvar prefer√™ncia no localStorage
  const isDark = body.classList.contains('tema-escuro');
  localStorage.setItem('tema', isDark ? 'escuro' : 'claro');
  
  // Atualizar √≠cone do toggle
  const icon = themeToggle.querySelector('i');
  icon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
});

// ‚úÖ Carregar tema salvo
const temaSalvo = localStorage.getItem('tema');
if (temaSalvo === 'escuro') {
  body.classList.add('tema-escuro');
  themeToggle.querySelector('i').textContent = '‚òÄÔ∏è';
}

// ‚úÖ Anima√ß√µes com classes
const animarElemento = (elemento) => {
  elemento.classList.add('animando');
  
  // Remover classe ap√≥s anima√ß√£o
  elemento.addEventListener('animationend', () => {
    elemento.classList.remove('animando');
  }, { once: true });
};

// ‚úÖ Sistema de valida√ß√£o com classes
const validarCampo = (campo) => {
  const valor = campo.value.trim();
  const isValid = valor.length > 0;
  
  campo.classList.toggle('valido', isValid);
  campo.classList.toggle('invalido', !isValid);
  
  return isValid;
};

// Aplicar valida√ß√£o em tempo real
document.querySelectorAll('input[required]').forEach(campo => {
  campo.addEventListener('blur', () => validarCampo(campo));
  campo.addEventListener('input', () => validarCampo(campo));
});</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Dataset - Acesso a Data Attributes</h3>
  <p>A propriedade <code>dataset</code> fornece acesso limpo aos atributos <code>data-*</code>, permitindo armazenar informa√ß√µes customizadas nos elementos HTML de forma padronizada.</p>
  <h4>Vantagens do Dataset:</h4>
  <ul class="left_list">
    <li>Acesso padronizado a data attributes</li>
    <li>Convers√£o autom√°tica de nomes (kebab-case ‚Üí camelCase)</li>
    <li>Integra√ß√£o com HTML sem√¢ntico</li>
    <li>Dados customizados nos elementos</li>
    <li>Facilita configura√ß√£o de componentes</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplos de Dataset:</h4>
  <pre><code>// ‚úÖ HTML com data attributes
/*
<div class="produto" 
     data-id="123" 
     data-preco="29.99" 
     data-categoria="eletr√¥nicos"
     data-em-estoque="true"
     data-config='{"cor": "azul", "tamanho": "M"}'>
  <h3>Smartphone XYZ</h3>
  <button data-action="comprar">Comprar</button>
</div>
*/

// ‚úÖ Acesso via dataset
const produto = document.querySelector('.produto');

// Acesso simples
console.log(produto.dataset.id); // "123"
console.log(produto.dataset.preco); // "29.99"
console.log(prodaset.categoria); // "eletr√¥nicos"

// Convers√£o autom√°tica de tipos
const preco = parseFloat(produto.dataset.preco); // 29.99
const emEstoque = produto.dataset.emEstoque === 'true'; // true

// ‚úÖ Modificar dataset
produto.dataset.preco = '24.99';
produto.dataset.promocao = 'true';
produto.dataset.desconto = '15';

// ‚úÖ Dataset com JSON
const config = JSON.parse(produto.dataset.config);
console.log(config.cor); // "azul"
console.log(config.tamanho); // "M"

// ‚úÖ Exemplo pr√°tico: carrinho de compras
const botoesComprar = document.querySelectorAll('[data-action="comprar"]');

botoesComprar.forEach(botao => {
  botao.addEventListener('click', (e) => {
    const produto = e.target.closest('.produto');
    const produtoData = {
      id: produto.dataset.id,
      nome: produto.querySelector('h3').textContent,
      preco: parseFloat(produto.dataset.preco),
      categoria: produto.dataset.categoria,
      emEstoque: produto.dataset.emEstoque === 'true'
    };
    
    adicionarAoCarrinho(produtoData);
  });
});

// ‚úÖ Exemplo: sistema de modal
const modalTriggers = document.querySelectorAll('[data-modal]');
const modal = document.querySelector('.modal');

modalTriggers.forEach(trigger => {
  trigger.addEventListener('click', () => {
    const modalId = trigger.dataset.modal;
    const modalContent = trigger.dataset.modalContent;
    const modalSize = trigger.dataset.modalSize || 'medium';
    
    // Configurar modal
    modal.dataset.modalId = modalId;
    modal.dataset.modalSize = modalSize;
    modal.classList.add('aberto');
    
    // Carregar conte√∫do se especificado
    if (modalContent) {
      carregarConteudoModal(modalContent);
    }
  });
});

// ‚úÖ Exemplo: componente de rating
const stars = document.querySelectorAll('.star[data-rating]');

stars.forEach(star => {
  star.addEventListener('click', () => {
    const rating = parseInt(star.dataset.rating);
    const produtoId = star.closest('.produto').dataset.id;
    
    // Atualizar visual das estrelas
    stars.forEach((s, index) => {
      s.classList.toggle('ativa', index < rating);
    });
    
    // Salvar rating
    salvarRating(produtoId, rating);
  });
});

// ‚úÖ Exemplo: sistema de filtros
const filtros = document.querySelectorAll('[data-filtrar]');

filtros.forEach(filtro => {
  filtro.addEventListener('click', () => {
    const categoria = filtro.dataset.filtrar;
    const valor = filtro.dataset.valor;
    
    // Aplicar filtro
    filtrarProdutos(categoria, valor);
    
    // Atualizar estado ativo
    filtros.forEach(f => f.classList.remove('ativo'));
    filtro.classList.add('ativo');
  });
});

// ‚úÖ Dataset com arrays
const elemento = document.querySelector('[data-tags]');
const tags = elemento.dataset.tags.split(',').map(tag => tag.trim());
console.log(tags); // ['javascript', 'dom', 'frontend']

// ‚úÖ Dataset din√¢mico
const atualizarDataset = (elemento, novosDados) => {
  Object.entries(novosDados).forEach(([chave, valor]) => {
    elemento.dataset[chave] = valor;
  });
};

// Uso
atualizarDataset(produto, {
  preco: '19.99',
  desconto: '25',
  novoItem: 'true'
});</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Delega√ß√£o de Eventos e Performance</h3>
  <p>A delega√ß√£o de eventos √© uma t√©cnica fundamental para otimizar performance e gerenciar eventos em elementos din√¢micos, especialmente √∫til em listas e componentes interativos.</p>
  <h4>Vantagens da Delega√ß√£o:</h4>
  <ul class="left_list">
    <li>Performance otimizada</li>
    <li>Funciona com elementos din√¢micos</li>
    <li>Menos event listeners</li>
    <li>Gerenciamento centralizado</li>
    <li>Facilita manuten√ß√£o</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplos de Delega√ß√£o de Eventos:</h4>
  <pre><code>// ‚úÖ Delega√ß√£o b√°sica
const lista = document.querySelector('.lista');

// Em vez de adicionar listener em cada item
lista.addEventListener('click', (e) => {
  if (e.target.matches('.item')) {
    console.log('Item clicado:', e.target.textContent);
    e.target.classList.toggle('selecionado');
  }
});

// ‚úÖ Delega√ß√£o com m√∫ltiplos tipos de elementos
const container = document.querySelector('.container');

container.addEventListener('click', (e) => {
  const elemento = e.target;
  
  if (elemento.matches('.botao-editar')) {
    editarItem(elemento.dataset.id);
  } else if (elemento.matches('.botao-excluir')) {
    excluirItem(elemento.dataset.id);
  } else if (elemento.matches('.botao-favoritar')) {
    favoritarItem(elemento.dataset.id);
  }
});

// ‚úÖ Exemplo pr√°tico: lista de tarefas
const listaTarefas = document.querySelector('.lista-tarefas');

// Adicionar tarefa
function adicionarTarefa(texto) {
  const li = document.createElement('li');
  li.className = 'tarefa';
  li.innerHTML = `
    <span class="texto">${texto}</span>
    <button class="btn-concluir" data-action="concluir">‚úì</button>
    <button class="btn-excluir" data-action="excluir">‚úó</button>
  `;
  listaTarefas.appendChild(li);
}

// Delega√ß√£o de eventos para a√ß√µes
listaTarefas.addEventListener('click', (e) => {
  const botao = e.target;
  const tarefa = botao.closest('.tarefa');
  
  if (botao.matches('[data-action="concluir"]')) {
    tarefa.classList.toggle('concluida');
    const texto = tarefa.querySelector('.texto');
    texto.style.textDecoration = tarefa.classList.contains('concluida') 
      ? 'line-through' 
      : 'none';
  } else if (botao.matches('[data-action="excluir"]')) {
    tarefa.remove();
  }
});

// ‚úÖ Exemplo: sistema de tabs com delega√ß√£o
const tabContainer = document.querySelector('.tabs');

tabContainer.addEventListener('click', (e) => {
  const tabButton = e.target.closest('.tab-button');
  
  if (tabButton) {
    const targetTab = tabButton.dataset.tab;
    
    // Remover ativo de todos
    tabContainer.querySelectorAll('.tab-button').forEach(btn => 
      btn.classList.remove('ativo')
    );
    
    // Adicionar ativo ao clicado
    tabButton.classList.add('ativo');
    
    // Mostrar conte√∫do correspondente
    tabContainer.querySelectorAll('.tab-content').forEach(content => 
      content.classList.remove('ativo')
    );
    
    const targetContent = tabContainer.querySelector(`[data-content="${targetTab}"]`);
    if (targetContent) {
      targetContent.classList.add('ativo');
    }
  }
});

// ‚úÖ Exemplo: formul√°rio din√¢mico
const formulario = document.querySelector('.formulario');

formulario.addEventListener('click', (e) => {
  if (e.target.matches('[data-action="adicionar-campo"]')) {
    const tipo = e.target.dataset.tipo;
    adicionarCampo(tipo);
  } else if (e.target.matches('[data-action="remover-campo"]')) {
    const campo = e.target.closest('.campo');
    campo.remove();
  }
});

formulario.addEventListener('input', (e) => {
  if (e.target.matches('input[data-validacao]')) {
    validarCampo(e.target);
  }
});

// ‚úÖ Exemplo: galeria de imagens
const galeria = document.querySelector('.galeria');

galeria.addEventListener('click', (e) => {
  const imagem = e.target.closest('.imagem-galeria');
  
  if (imagem) {
    const src = imagem.dataset.src;
    const alt = imagem.dataset.alt;
    abrirModalImagem(src, alt);
  }
});

// ‚úÖ Exemplo: sistema de favoritos
const produtosContainer = document.querySelector('.produtos');

produtosContainer.addEventListener('click', (e) => {
  const coracao = e.target.closest('.favoritar');
  
  if (coracao) {
    const produtoId = coracao.dataset.produtoId;
    const isFavorito = coracao.classList.contains('ativo');
    
    if (isFavorito) {
      coracao.classList.remove('ativo');
      removerFavorito(produtoId);
    } else {
      coracao.classList.add('ativo');
      adicionarFavorito(produtoId);
    }
  }
});

// ‚úÖ Performance: throttle para scroll
let scrollTimeout;
window.addEventListener('scroll', () => {
  if (scrollTimeout) {
    clearTimeout(scrollTimeout);
  }
  
  scrollTimeout = setTimeout(() => {
    // C√≥digo que executa ap√≥s parar de scrollar
    atualizarPosicaoScroll();
  }, 100);
});

// ‚úÖ Performance: debounce para input
let inputTimeout;
const campoBusca = document.querySelector('.campo-busca');

campoBusca.addEventListener('input', (e) => {
  if (inputTimeout) {
    clearTimeout(inputTimeout);
  }
  
  inputTimeout = setTimeout(() => {
    buscar(e.target.value);
  }, 300);
});</code></pre>

  <picture>
    <source media="(min-width: 1024px)" srcset="/src/pages/cursos/javascript/04/images/delegacao_eventos_desktop.png">
    <source media="(min-width: 600px)" srcset="/src/pages/cursos/javascript/04/images/delegacao_eventos_tablet.png">
    <img src="/src/pages/cursos/javascript/04/images/delegacao_eventos_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Pr√°tica: Menu Interativo e Modal</h3>
  <p>Vamos criar um menu interativo responsivo e um sistema de modal usando todas as t√©cnicas modernas de manipula√ß√£o do DOM aprendidas.</p>
  <h4>Objetivos da Pr√°tica:</h4>
  <ul class="left_list">
    <li>Criar menu responsivo com anima√ß√µes</li>
    <li>Implementar sistema de modal reutiliz√°vel</li>
    <li>Usar delega√ß√£o de eventos eficientemente</li>
    <li>Aplicar dataset para configura√ß√£o</li>
    <li>Implementar acessibilidade b√°sica</li>
  </ul>
</article>

<article class="item">
  <h4>Menu Interativo e Modal:</h4>
  <pre><code>// ‚úÖ Classe para Menu Responsivo
class MenuResponsivo {
  constructor(menuElement) {
    this.menu = menuElement;
    this.toggle = menuElement.querySelector('.menu-toggle');
    this.overlay = menuElement.querySelector('.menu-overlay');
    this.nav = menuElement.querySelector('.menu-nav');
    this.isOpen = false;
    
    this.init();
  }
  
  init() {
    this.bindEvents();
    this.setupAccessibility();
  }
  
  bindEvents() {
    // Toggle do menu
    this.toggle.addEventListener('click', () => this.toggleMenu());
    
    // Fechar com overlay
    this.overlay.addEventListener('click', () => this.closeMenu());
    
    // Fechar com ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && this.isOpen) {
        this.closeMenu();
      }
    });
    
    // Fechar ao clicar em link
    this.nav.addEventListener('click', (e) => {
      if (e.target.matches('a[href^="#"]')) {
        this.closeMenu();
      }
    });
  }
  
  toggleMenu() {
    if (this.isOpen) {
      this.closeMenu();
    } else {
      this.openMenu();
    }
  }
  
  openMenu() {
    this.isOpen = true;
    this.menu.classList.add('menu-aberto');
    this.toggle.classList.add('ativo');
    this.overlay.classList.add('visivel');
    document.body.classList.add('menu-aberto');
    
    // Foco no primeiro link
    const primeiroLink = this.nav.querySelector('a');
    if (primeiroLink) {
      primeiroLink.focus();
    }
  }
  
  closeMenu() {
    this.isOpen = false;
    this.menu.classList.remove('menu-aberto');
    this.toggle.classList.remove('ativo');
    this.overlay.classList.remove('visivel');
    document.body.classList.remove('menu-aberto');
    
    // Retornar foco ao toggle
    this.toggle.focus();
  }
  
  setupAccessibility() {
    this.toggle.setAttribute('aria-expanded', 'false');
    this.toggle.setAttribute('aria-controls', 'menu-nav');
    this.nav.setAttribute('id', 'menu-nav');
    this.nav.setAttribute('aria-hidden', 'true');
  }
}

// ‚úÖ Classe para Modal
class Modal {
  constructor() {
    this.modal = null;
    this.overlay = null;
    this.isOpen = false;
    this.focusableElements = [];
    this.lastFocusedElement = null;
    
    this.init();
  }
  
  init() {
    this.createModalHTML();
    this.bindEvents();
  }
  
  createModalHTML() {
    // Criar estrutura do modal
    const modalHTML = `
      <div class="modal-overlay" data-modal-overlay>
        <div class="modal-container" data-modal-container>
          <div class="modal-header">
            <h2 class="modal-title" data-modal-title></h2>
            <button class="modal-close" data-modal-close aria-label="Fechar modal">
              <span>√ó</span>
            </button>
          </div>
          <div class="modal-body" data-modal-body></div>
          <div class="modal-footer" data-modal-footer></div>
        </div>
      </div>
    `;
    
    document.body.insertAdjacentHTML('beforeend', modalHTML);
    
    this.modal = document.querySelector('.modal-overlay');
    this.overlay = this.modal;
    this.container = this.modal.querySelector('.modal-container');
    this.title = this.modal.querySelector('[data-modal-title]');
    this.body = this.modal.querySelector('[data-modal-body]');
    this.footer = this.modal.querySelector('[data-modal-footer]');
    this.closeBtn = this.modal.querySelector('[data-modal-close]');
  }
  
  bindEvents() {
    // Fechar modal
    this.closeBtn.addEventListener('click', () => this.close());
    this.overlay.addEventListener('click', (e) => {
      if (e.target === this.overlay) {
        this.close();
      }
    });
    
    // ESC para fechar
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && this.isOpen) {
        this.close();
      }
    });
    
    // Trap de foco
    this.modal.addEventListener('keydown', (e) => {
      if (e.key === 'Tab') {
        this.trapFocus(e);
      }
    });
  }
  
  open(options = {}) {
    const {
      title = '',
      content = '',
      footer = '',
      size = 'medium',
      closable = true
    } = options;
    
    // Configurar conte√∫do
    this.title.textContent = title;
    this.body.innerHTML = content;
    this.footer.innerHTML = footer;
    
    // Configurar tamanho
    this.container.className = `modal-container modal-${size}`;
    
    // Configurar fechamento
    this.closeBtn.style.display = closable ? 'block' : 'none';
    
    // Salvar elemento que tinha foco
    this.lastFocusedElement = document.activeElement;
    
    // Mostrar modal
    this.modal.classList.add('modal-aberto');
    document.body.classList.add('modal-aberto');
    this.isOpen = true;
    
    // Configurar acessibilidade
    this.setupAccessibility();
    
    // Focar no modal
    this.container.focus();
    
    // Buscar elementos foc√°veis
    this.updateFocusableElements();
  }
  
  close() {
    this.modal.classList.remove('modal-aberto');
    document.body.classList.remove('modal-aberto');
    this.isOpen = false;
    
    // Retornar foco
    if (this.lastFocusedElement) {
      this.lastFocusedElement.focus();
    }
  }
  
  setupAccessibility() {
    this.modal.setAttribute('aria-hidden', 'false');
    this.container.setAttribute('tabindex', '-1');
    this.container.setAttribute('role', 'dialog');
    this.container.setAttribute('aria-modal', 'true');
  }
  
  updateFocusableElements() {
    const focusableSelectors = [
      'button:not([disabled])',
      'input:not([disabled])',
      'select:not([disabled])',
      'textarea:not([disabled])',
      'a[href]',
      '[tabindex]:not([tabindex="-1"])'
    ];
    
    this.focusableElements = this.modal.querySelectorAll(focusableSelectors.join(', '));
  }
  
  trapFocus(e) {
    const firstElement = this.focusableElements[0];
    const lastElement = this.focusableElements[this.focusableElements.length - 1];
    
    if (e.shiftKey) {
      if (document.activeElement === firstElement) {
        e.preventDefault();
        lastElement.focus();
      }
    } else {
      if (document.activeElement === lastElement) {
        e.preventDefault();
        firstElement.focus();
      }
    }
  }
}

// ‚úÖ Inicializa√ß√£o dos componentes
document.addEventListener('DOMContentLoaded', () => {
  // Inicializar menu
  const menuElement = document.querySelector('.menu-responsivo');
  if (menuElement) {
    new MenuResponsivo(menuElement);
  }
  
  // Inicializar modal
  const modal = new Modal();
  
  // Configurar bot√µes que abrem modal
  document.addEventListener('click', (e) => {
    const trigger = e.target.closest('[data-modal-trigger]');
    
    if (trigger) {
      const modalType = trigger.dataset.modalTrigger;
      const modalOptions = {
        title: trigger.dataset.modalTitle || 'Modal',
        content: trigger.dataset.modalContent || '<p>Conte√∫do do modal</p>',
        size: trigger.dataset.modalSize || 'medium',
        closable: trigger.dataset.modalClosable !== 'false'
      };
      
      // Exemplos de diferentes tipos de modal
      switch (modalType) {
        case 'confirmacao':
          modalOptions.title = 'Confirmar a√ß√£o';
          modalOptions.content = '<p>Tem certeza que deseja continuar?</p>';
          modalOptions.footer = `
            <button class="btn btn-secondary" data-modal-close>Cancelar</button>
            <button class="btn btn-primary" onclick="confirmarAcao()">Confirmar</button>
          `;
          break;
          
        case 'formulario':
          modalOptions.title = 'Novo item';
          modalOptions.content = `
            <form class="modal-form">
              <div class="form-group">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" required>
              </div>
              <div class="form-group">
                <label for="descricao">Descri√ß√£o:</label>
                <textarea id="descricao" name="descricao"></textarea>
              </div>
            </form>
          `;
          modalOptions.footer = `
            <button class="btn btn-secondary" data-modal-close>Cancelar</button>
            <button class="btn btn-primary" onclick="salvarItem()">Salvar</button>
          `;
          break;
      }
      
      modal.open(modalOptions);
    }
  });
});

// ‚úÖ Fun√ß√µes auxiliares
function confirmarAcao() {
  console.log('A√ß√£o confirmada');
  modal.close();
}

function salvarItem() {
  const form = document.querySelector('.modal-form');
  const formData = new FormData(form);
  
  console.log('Dados do formul√°rio:', Object.fromEntries(formData));
  modal.close();
}</code></pre>
</article>
</section>

<span id="exercicio">
<p>Crie uma interface interativa completa com DOM moderno:<p>
  <ul>
  <li>T√≠tulo = Interface Interativa com DOM Moderno<br></li>
  <li>Menu responsivo com anima√ß√µes suaves<br></li>
  <li>Sistema de modal reutiliz√°vel e acess√≠vel<br></li>
  <li>Delega√ß√£o de eventos para performance<br></li>
  <li>Uso de dataset para configura√ß√£o<br></li>
  <li>Manipula√ß√£o de classes com classList<br></li>
  <li>Implementa√ß√£o de acessibilidade b√°sica<br></li>
</ul>
</p>Inclua componentes como tabs, accordion e galeria de imagens com intera√ß√µes modernas.</p>
</span>

  <form id="controles">
    <fieldset>
      <legend>Controles</legend>
    <h4>Escolha um template</h4>
    <select id="templateSelect">
      <option value="/vitrine-ml5/mlab5/templates/classico.html">Classico</option>
      <option value="/vitrine-ml5/mlab5/templates/moderno.html">Moderno</option>
      <option value="/vitrine-ml5/mlab5/templates/dark_mode.html">Dark Mode3</option>
    </select>

    <h4>Personalize</h4>
    <label>Cor de fundo: <input type="color" id="bgColor" value="#ffffff"></label><br>
    <label>Cor do texto: <input type="color" id="textColor" value="#000000"></label><br><br>

    <label>Fonte:
      <select id="fontFamily">
        <option value="Arial, sans-serif">Arial</option>
        <option value="Georgia, serif">Georgia</option>
        <option value="'Courier New', monospace">Courier New</option>
      </select><br>
    </label><br><br>
    </fieldset><br>
    <button onclick="salvarCustomizacao()">Salvar e Visualizar</button>
  </form>

<section class="container">
<article class="item">
    <a href="/src/pages/playground" id="download-button" class="btn-large waves-effect waves-light teal lighten-1" >Playground</a>
</article>
</section>

</main>

<div id="footer-placeholder"></div>

<script>
  async function loadComponent(placeholderId, url) {
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error(`Erro ao carregar ${url}`);
      const html = await response.text();
      document.getElementById(placeholderId).innerHTML = html;
    } catch (error) {
      console.error(error);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    loadComponent('header-placeholder', '/src/assets/js/ui/components/header.html')
      .then(() => {
        const script = document.createElement('script');
        script.src = '/src/assets/js/ui/components/navbar.js';
        document.body.appendChild(script);
      })
      .catch(error => {
        console.error("Erro ao carregar o header:", error);
      });

    loadComponent('footer-placeholder', '/src/assets/js/ui/components/footer.html');
  });

  document.addEventListener('DOMContentLoaded', () => {
    const exercicio = document.getElementById('exercicio')?.innerText || "";
    const playgroundLink = document.querySelector('a[href="/src/pages/playground"]'); 

    if (playgroundLink) {
      playgroundLink.addEventListener('click', (event) => {
        event.preventDefault();

        // Salva o texto das instru√ß√µes
        localStorage.setItem('instrucoes', exercicio);

        // Salva o HTML do formul√°rio inteiro
        const controles = document.getElementById('controles');
        localStorage.setItem('ajustes', controles.outerHTML);

        // Redireciona para o playground
        window.location.href = playgroundLink.href;
      });
    }
  });
</script>

</body>
</html>

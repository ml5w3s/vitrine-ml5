<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="icon" type="image/x-icon" href="/vitrine-ml5/mlab5/src/assets/images/ml5w3s.ico">

  <title>Cursos de Tecnologia e Projetos e Vagas de Emprego | ML5Lab</title>

  <!-- SEO  -->
  <meta name="description" content="Cursos e treinamentos online em tecnologia, projetos práticos e vagas de emprego atualizadas para impulsionar sua carreira.">
  <meta name="keywords" content="cursos online, treinamentos tecnologia, vagas de emprego, projetos práticos, programação, Experiência profissional, desenvolvimento web">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ml5w3s.com.br">
  <meta http-equiv="content-language" content="pt-BR">

  <!-- OG -->
  <meta property="og:title" content="Cursos e Treinamentos em Tecnologia | [Nome do Site]">
  <meta property="og:description" content="Aprenda com cursos práticos, participe de projetos e encontre vagas de emprego na área de tecnologia.">
  <meta property="og:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
  <meta property="og:url" content="http://ml5w3s.com.br">
  <meta property="og:type" content="website">

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="src/assets/css/base.css" type="text/css" rel="stylesheet" media="screen,projection"/>

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Cursos Online e Vagas de Emprego | [ML5Lab]">
  <meta name="twitter:description" content="Cursos práticos, projetos reais e vagas de emprego em tecnologia. Comece agora!">
  <meta name="twitter:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
</head>

<body>
  <!-- CABEÇALHO -->
  <div id="header-placeholder"></div>

  <!-- O conteúdo da SPA será renderizado aqui -->
  <main id="app-root" class="container"></main>

  <!-- RODAPÉ  -->
  <div id="footer-placeholder"></div>

  <!-- SCRIPTS -->
  <!-- Componentes -->
  <script src="src/assets/js/components/LousaComponent.js"></script>
  <script src="src/assets/js/components/PlaygroundComponent.js"></script>
  <!-- Modelos -->
  <script src="src/assets/js/models/Lesson.js"></script>
  <script src="src/assets/js/models/Course.js"></script>
  <!-- Serviços -->
  <script src="src/assets/js/services/ApiService.js"></script>
  <!-- Views -->
  <script src="src/assets/js/views/HomeView.js"></script>
  <script src="src/assets/js/views/CourseView.js"></script>
  <!-- Roteamento -->
  <script src="src/assets/js/routing/Router.js"></script>
  
  <!-- Lógica Principal da Aplicação -->
  <script src="src/assets/js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Carrega componentes estáticos (header/footer)
      loadComponent('header-placeholder', 'src/assets/js/ui/components/header.html')
        .then(() => {
          // Garante que o script da navbar seja carregado após o header
          const script = document.createElement('script');
          script.src = 'src/assets/js/ui/components/navbar.js';
          document.body.appendChild(script);
        });
      loadComponent('footer-placeholder', 'src/assets/js/ui/components/footer.html');

      // Elemento raiz da aplicação
      const appRoot = document.getElementById('app-root');

      // Instancia o roteador
      const router = new Router(appRoot);

      // Define a rota para a Home Page (lista de cursos)
      router.addRoute('/', async () => {
        appRoot.innerHTML = 'Carregando cursos...';
        const homeView = await renderHomeView();
        appRoot.innerHTML = ''; // Limpa o 'Carregando'
        appRoot.appendChild(homeView);
      });

      // Define a rota para a página de detalhes do curso
      router.addRoute('/course/:courseId', async (params) => {
        const { courseId } = params;
        appRoot.innerHTML = `Carregando curso ${courseId}...`;
        const course = await apiService.getCourseById(courseId);
        if (course) {
          const courseView = renderCourseView(course);
          appRoot.innerHTML = ''; // Limpa o 'Carregando'
          appRoot.appendChild(courseView);
        } else {
          appRoot.innerHTML = '<h2>Curso não encontrado</h2>';
        }
      });

      // Define a rota para a página de detalhes da aula
      router.addRoute('/course/:courseId/lesson/:lessonId', async (params) => {
        const { courseId, lessonId } = params;
        appRoot.innerHTML = `Carregando aula ${lessonId} do curso ${courseId}...`;
        const lesson = await apiService.getLessonById(courseId, lessonId);
        if (lesson) {
          const lessonView = lesson.render(); // Usa o método render da classe Lesson
          appRoot.innerHTML = ''; // Limpa o 'Carregando'
          appRoot.appendChild(lessonView);
        } else {
          appRoot.innerHTML = '<h2>Aula não encontrada</h2>';
        }
      });
      
      // O router já tem listeners para 'load' e 'hashchange', 
      // mas chamamos aqui para garantir que a rota inicial seja processada após a definição das rotas.
      router.handleRouteChange();
    });
  </script>
</body>
</html>

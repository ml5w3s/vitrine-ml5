<!--curso_jquery/06/index.html-->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="icon" type="image/x-icon" href="/vitrine-ml5/mlab5/images/ml5w3s.ico">
  <title>Aula 06 - Valida√ß√£o de Formul√°rios | ML5Lab</title>

  <!-- SEO  -->
  <meta name="description" content="Aprenda valida√ß√£o de formul√°rios com jQuery: valida√ß√£o em tempo real, mensagens de erro, valida√ß√£o customizada e UX aprimorada.">
  <meta name="keywords" content="jquery, valida√ß√£o, formul√°rios, valida√ß√£o client-side, UX, mensagens erro">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ml5w3s.com.br/">
  <meta http-equiv="content-language" content="pt-BR">

  <!-- OG -->
  <meta property="og:title" content="Aula 06 - Valida√ß√£o de Formul√°rios | ML5Lab">
  <meta property="og:description" content="Aprenda valida√ß√£o de formul√°rios com jQuery: valida√ß√£o em tempo real, mensagens de erro, valida√ß√£o customizada e UX aprimorada.">
  <meta property="og:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
  <meta property="og:url" content="http://ml5w3s.com.br">
  <meta property="og:type" content="website">

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="/vitrine-ml5/mlab5/css/base.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="/vitrine-ml5/mlab5/css/jquery.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <style>#exercicios, #controles{display:none;}</style>
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Aula 06 - Valida√ß√£o de Formul√°rios | ML5Lab">
  <meta name="twitter:description" content="Aprenda valida√ß√£o de formul√°rios com jQuery: valida√ß√£o em tempo real, mensagens de erro, valida√ß√£o customizada e UX aprimorada.">
  <meta name="twitter:image" content="http://ml5w3s.com.br/images/banner_barramento.png">

  <!--PLUGIN jQUERY-->
  <script src="/vitrine-ml5/mlab5/js/jquery.min.js"></script>
</head>

<body>

<!-- COMPONENTES -->
<div id="header-placeholder"></div>
<main id="aulas">

<!-- ARTIGOS -->
<section class="container">
<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/images/banner_legado_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/images/banner_legado_tablet.png">
    <img src="/vitrine-ml5/mlab5/images/banner_legado_mobile.png">
  </picture>
  <h3>üìù Valida√ß√£o de Formul√°rios</h3>
</article>
</section>

<section class="container">
<!--INSTRU√á√ïES-->
<article class="item">
  <h3>Valida√ß√£o B√°sica de Formul√°rios</h3>
  <p>A valida√ß√£o de formul√°rios √© essencial para garantir que os dados inseridos pelos usu√°rios estejam corretos antes do envio. jQuery facilita a implementa√ß√£o de valida√ß√µes client-side eficientes.</p>
  <h4>Tipos de valida√ß√£o:</h4>
  <ul class="left_list">
    <li><strong>Valida√ß√£o em tempo real:</strong> Durante a digita√ß√£o</li>
    <li><strong>Valida√ß√£o no blur:</strong> Ao sair do campo</li>
    <li><strong>Valida√ß√£o no submit:</strong> Ao enviar o formul√°rio</li>
    <li><strong>Valida√ß√£o customizada:</strong> Regras espec√≠ficas</li>
    <li><strong>Valida√ß√£o de arquivos:</strong> Upload de arquivos</li>
  </ul>
</article>

<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/cursos/jquery/06/images/validacao_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/cursos/jquery/06/images/validacao_tablet.png">
    <img src="/vitrine-ml5/mlab5/cursos/jquery/06/images/validacao_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Estrutura HTML para Valida√ß√£o</h3>
  <p>Uma boa estrutura HTML √© fundamental para implementar valida√ß√µes eficazes e acess√≠veis.</p>
  <h4>Elementos essenciais:</h4>
  <ul class="left_list">
    <li><strong>Labels:</strong> Associados aos inputs</li>
    <li><strong>Required:</strong> Campos obrigat√≥rios</li>
    <li><strong>Types:</strong> Tipos de input apropriados</li>
    <li><strong>Pattern:</strong> Padr√µes de valida√ß√£o</li>
    <li><strong>Mensagens:</strong> Containers para erros</li>
  </ul>
</article>

<article class="item">
  <h4>HTML do formul√°rio:</h4>
  <pre><code><!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Valida√ß√£o de Formul√°rio jQuery</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
        }
        
        .form-group input.error,
        .form-group select.error,
        .form-group textarea.error {
            border-color: #dc3545;
            background-color: #fff5f5;
        }
        
        .form-group input.valid,
        .form-group select.valid,
        .form-group textarea.valid {
            border-color: #28a745;
            background-color: #f8fff9;
        }
        
        .error-message {
            color: #dc3545;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        .success-message {
            color: #28a745;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .success-message.show {
            display: block;
        }
        
        .submit-btn {
            background: #007bff;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .submit-btn:hover {
            background: #0056b3;
        }
        
        .submit-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        
        .form-summary {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .validation-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-left: 10px;
            text-align: center;
            line-height: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .validation-indicator.valid {
            background: #28a745;
            color: white;
        }
        
        .validation-indicator.error {
            background: #dc3545;
            color: white;
        }
    </style>
</head>
<body>
    <h1>Formul√°rio de Cadastro</h1>
    
    <form id="registrationForm">
        <div class="form-group">
            <label for="nome">Nome Completo *</label>
            <input type="text" id="nome" name="nome" required>
            <span class="error-message" id="nome-error"></span>
            <span class="success-message" id="nome-success">‚úì Nome v√°lido</span>
        </div>
        
        <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" required>
            <span class="error-message" id="email-error"></span>
            <span class="success-message" id="email-success">‚úì Email v√°lido</span>
        </div>
        
        <div class="form-group">
            <label for="telefone">Telefone</label>
            <input type="tel" id="telefone" name="telefone" placeholder="(11) 99999-9999">
            <span class="error-message" id="telefone-error"></span>
            <span class="success-message" id="telefone-success">‚úì Telefone v√°lido</span>
        </div>
        
        <div class="form-group">
            <label for="senha">Senha *</label>
            <input type="password" id="senha" name="senha" required>
            <span class="error-message" id="senha-error"></span>
            <span class="success-message" id="senha-success">‚úì Senha v√°lida</span>
        </div>
        
        <div class="form-group">
            <label for="confirmar-senha">Confirmar Senha *</label>
            <input type="password" id="confirmar-senha" name="confirmar-senha" required>
            <span class="error-message" id="confirmar-senha-error"></span>
            <span class="success-message" id="confirmar-senha-success">‚úì Senhas coincidem</span>
        </div>
        
        <div class="form-group">
            <label for="idade">Idade</label>
            <input type="number" id="idade" name="idade" min="18" max="120">
            <span class="error-message" id="idade-error"></span>
            <span class="success-message" id="idade-success">‚úì Idade v√°lida</span>
        </div>
        
        <div class="form-group">
            <label for="cidade">Cidade</label>
            <select id="cidade" name="cidade">
                <option value="">Selecione uma cidade</option>
                <option value="sp">S√£o Paulo</option>
                <option value="rj">Rio de Janeiro</option>
                <option value="bh">Belo Horizonte</option>
                <option value="rs">Porto Alegre</option>
            </select>
            <span class="error-message" id="cidade-error"></span>
            <span class="success-message" id="cidade-success">‚úì Cidade selecionada</span>
        </div>
        
        <div class="form-group">
            <label for="comentarios">Coment√°rios</label>
            <textarea id="comentarios" name="comentarios" rows="4" placeholder="Deixe seus coment√°rios..."></textarea>
            <span class="error-message" id="comentarios-error"></span>
        </div>
        
        <div class="form-group">
            <label>
                <input type="checkbox" id="termos" name="termos" required>
                Aceito os termos e condi√ß√µes *
            </label>
            <span class="error-message" id="termos-error"></span>
            <span class="success-message" id="termos-success">‚úì Termos aceitos</span>
        </div>
        
        <button type="submit" class="submit-btn" id="submitBtn">
            Cadastrar
        </button>
    </form>
    
    <div class="form-summary" id="formSummary" style="display: none;">
        <h3>Resumo do Formul√°rio</h3>
        <div id="summaryContent"></div>
    </div>
</body>
</html></code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>JavaScript de Valida√ß√£o</h3>
  <p>O JavaScript implementa as regras de valida√ß√£o, feedback visual e controle do formul√°rio.</p>
</article>

<article class="item">
  <h4>C√≥digo JavaScript de valida√ß√£o:</h4>
  <pre><code>$(document).ready(function() {
    var validationRules = {
        nome: {
            required: true,
            minLength: 2,
            pattern: /^[a-zA-Z√Ä-√ø\s]+$/,
            message: 'Nome deve ter pelo menos 2 caracteres e conter apenas letras'
        },
        email: {
            required: true,
            pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
            message: 'Email deve ter um formato v√°lido'
        },
        telefone: {
            required: false,
            pattern: /^\(\d{2}\)\s\d{4,5}-\d{4}$/,
            message: 'Telefone deve estar no formato (11) 99999-9999'
        },
        senha: {
            required: true,
            minLength: 8,
            pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/,
            message: 'Senha deve ter pelo menos 8 caracteres, incluindo mai√∫scula, min√∫scula e n√∫mero'
        },
        'confirmar-senha': {
            required: true,
            matchField: 'senha',
            message: 'Senhas devem coincidir'
        },
        idade: {
            required: false,
            min: 18,
            max: 120,
            message: 'Idade deve estar entre 18 e 120 anos'
        },
        cidade: {
            required: false,
            message: 'Selecione uma cidade v√°lida'
        },
        comentarios: {
            required: false,
            maxLength: 500,
            message: 'Coment√°rios n√£o podem exceder 500 caracteres'
        },
        termos: {
            required: true,
            message: 'Voc√™ deve aceitar os termos e condi√ß√µes'
        }
    };
    
    // Fun√ß√£o para mostrar erro
    function showError(fieldName, message) {
        var $field = $('#' + fieldName);
        var $errorMsg = $('#' + fieldName + '-error');
        var $successMsg = $('#' + fieldName + '-success');
        
        $field.removeClass('valid').addClass('error');
        $errorMsg.text(message).addClass('show');
        $successMsg.removeClass('show');
    }
    
    // Fun√ß√£o para mostrar sucesso
    function showSuccess(fieldName) {
        var $field = $('#' + fieldName);
        var $errorMsg = $('#' + fieldName + '-error');
        var $successMsg = $('#' + fieldName + '-success');
        
        $field.removeClass('error').addClass('valid');
        $errorMsg.removeClass('show');
        $successMsg.addClass('show');
    }
    
    // Fun√ß√£o para limpar valida√ß√£o
    function clearValidation(fieldName) {
        var $field = $('#' + fieldName);
        var $errorMsg = $('#' + fieldName + '-error');
        var $successMsg = $('#' + fieldName + '-success');
        
        $field.removeClass('error valid');
        $errorMsg.removeClass('show');
        $successMsg.removeClass('show');
    }
    
    // Fun√ß√£o para validar campo individual
    function validateField(fieldName, value) {
        var rules = validationRules[fieldName];
        if (!rules) return true;
        
        // Verificar se √© obrigat√≥rio
        if (rules.required && (!value || value.trim() === '')) {
            showError(fieldName, 'Este campo √© obrigat√≥rio');
            return false;
        }
        
        // Se n√£o √© obrigat√≥rio e est√° vazio, considerar v√°lido
        if (!rules.required && (!value || value.trim() === '')) {
            clearValidation(fieldName);
            return true;
        }
        
        // Verificar comprimento m√≠nimo
        if (rules.minLength && value.length < rules.minLength) {
            showError(fieldName, rules.message);
            return false;
        }
        
        // Verificar comprimento m√°ximo
        if (rules.maxLength && value.length > rules.maxLength) {
            showError(fieldName, rules.message);
            return false;
        }
        
        // Verificar valor m√≠nimo
        if (rules.min !== undefined && parseFloat(value) < rules.min) {
            showError(fieldName, rules.message);
            return false;
        }
        
        // Verificar valor m√°ximo
        if (rules.max !== undefined && parseFloat(value) > rules.max) {
            showError(fieldName, rules.message);
            return false;
        }
        
        // Verificar padr√£o
        if (rules.pattern && !rules.pattern.test(value)) {
            showError(fieldName, rules.message);
            return false;
        }
        
        // Verificar correspond√™ncia com outro campo
        if (rules.matchField) {
            var matchValue = $('#' + rules.matchField).val();
            if (value !== matchValue) {
                showError(fieldName, rules.message);
                return false;
            }
        }
        
        // Verificar checkbox
        if (fieldName === 'termos' && !$('#termos').is(':checked')) {
            showError(fieldName, rules.message);
            return false;
        }
        
        showSuccess(fieldName);
        return true;
    }
    
    // Valida√ß√£o em tempo real
    $('input, select, textarea').on('blur keyup', function() {
        var fieldName = $(this).attr('name');
        var value = $(this).val();
        
        // Delay para valida√ß√£o de senha (n√£o validar enquanto digita)
        if (fieldName === 'senha' || fieldName === 'confirmar-senha') {
            clearTimeout(window.passwordValidationTimer);
            window.passwordValidationTimer = setTimeout(function() {
                validateField(fieldName, value);
                
                // Revalidar confirma√ß√£o de senha quando senha mudar
                if (fieldName === 'senha') {
                    validateField('confirmar-senha', $('#confirmar-senha').val());
                }
            }, 500);
        } else {
            validateField(fieldName, value);
        }
    });
    
    // Valida√ß√£o do checkbox de termos
    $('#termos').change(function() {
        validateField('termos', $(this).is(':checked') ? 'checked' : '');
    });
    
    // Formata√ß√£o de telefone
    $('#telefone').on('input', function() {
        var value = $(this).val().replace(/\D/g, '');
        var formattedValue = value.replace(/^(\d{2})(\d{4,5})(\d{4})$/, '($1) $2-$3');
        $(this).val(formattedValue);
    });
    
    // Valida√ß√£o do formul√°rio completo
    $('#registrationForm').submit(function(e) {
        e.preventDefault();
        
        var isValid = true;
        var formData = {};
        
        // Validar todos os campos
        Object.keys(validationRules).forEach(function(fieldName) {
            var value = $('#' + fieldName).val();
            if (fieldName === 'termos') {
                value = $('#' + fieldName).is(':checked') ? 'checked' : '';
            }
            
            if (!validateField(fieldName, value)) {
                isValid = false;
            }
            
            formData[fieldName] = value;
        });
        
        if (isValid) {
            // Formul√°rio v√°lido - mostrar resumo
            showFormSummary(formData);
            
            // Aqui voc√™ normalmente enviaria os dados para o servidor
            console.log('Formul√°rio v√°lido:', formData);
            
            // Simular envio
            $('#submitBtn').prop('disabled', true).text('Enviando...');
            
            setTimeout(function() {
                alert('Formul√°rio enviado com sucesso!');
                $('#submitBtn').prop('disabled', false).text('Cadastrar');
                $('#formSummary').hide();
            }, 2000);
        } else {
            // Formul√°rio inv√°lido - rolar para primeiro erro
            var firstError = $('.error-message.show').first();
            if (firstError.length) {
                $('html, body').animate({
                    scrollTop: firstError.offset().top - 100
                }, 500);
                
                firstError.closest('.form-group').find('input, select, textarea').first().focus();
            }
        }
    });
    
    // Fun√ß√£o para mostrar resumo do formul√°rio
    function showFormSummary(data) {
        var summary = '<ul>';
        
        Object.keys(data).forEach(function(key) {
            if (data[key] && key !== 'termos') {
                var label = $('label[for="' + key + '"]').text().replace(' *', '');
                summary += '<li><strong>' + label + ':</strong> ' + data[key] + '</li>';
            }
        });
        
        if (data.termos === 'checked') {
            summary += '<li><strong>Termos:</strong> Aceitos</li>';
        }
        
        summary += '</ul>';
        
        $('#summaryContent').html(summary);
        $('#formSummary').show();
    }
    
    // Valida√ß√£o inicial (verificar campos j√° preenchidos)
    $('input, select, textarea').each(function() {
        var fieldName = $(this).attr('name');
        if (fieldName && validationRules[fieldName]) {
            validateField(fieldName, $(this).val());
        }
    });
});</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Valida√ß√£o Avan√ßada</h3>
  <p>Valida√ß√µes mais complexas incluem verifica√ß√£o de disponibilidade, valida√ß√£o de arquivos e integra√ß√£o com APIs.</p>
  <h4>Tipos de valida√ß√£o avan√ßada:</h4>
  <ul class="left_list">
    <li><strong>Valida√ß√£o ass√≠ncrona:</strong> Verifica√ß√£o no servidor</li>
    <li><strong>Valida√ß√£o de arquivos:</strong> Tipo, tamanho, dimens√µes</li>
    <li><strong>Valida√ß√£o condicional:</strong> Baseada em outros campos</li>
    <li><strong>Valida√ß√£o em lote:</strong> M√∫ltiplos campos</li>
    <li><strong>Valida√ß√£o customizada:</strong> Regras espec√≠ficas</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplos de valida√ß√£o avan√ßada:</h4>
  <pre><code>// ‚úÖ Valida√ß√£o ass√≠ncrona de email
function validateEmailAvailability(email) {
    return $.ajax({
        url: '/api/check-email',
        method: 'POST',
        data: { email: email },
        dataType: 'json'
    });
}

$('#email').on('blur', function() {
    var email = $(this).val();
    if (email && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        $(this).next('.loading').show();
        
        validateEmailAvailability(email)
            .done(function(response) {
                if (response.available) {
                    showSuccess('email');
                    $('#email-success').text('‚úì Email dispon√≠vel');
                } else {
                    showError('email', 'Este email j√° est√° em uso');
                }
            })
            .fail(function() {
                showError('email', 'Erro ao verificar disponibilidade do email');
            })
            .always(function() {
                $(this).next('.loading').hide();
            });
    }
});

// ‚úÖ Valida√ß√£o de arquivo
$('#arquivo').on('change', function() {
    var file = this.files[0];
    var maxSize = 5 * 1024 * 1024; // 5MB
    var allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];
    
    if (!file) return;
    
    // Verificar tamanho
    if (file.size > maxSize) {
        showError('arquivo', 'Arquivo deve ter menos de 5MB');
        return;
    }
    
    // Verificar tipo
    if (!allowedTypes.includes(file.type)) {
        showError('arquivo', 'Apenas imagens JPG, PNG e GIF s√£o permitidas');
        return;
    }
    
    // Verificar dimens√µes da imagem
    var img = new Image();
    img.onload = function() {
        if (this.width < 300 || this.height < 300) {
            showError('arquivo', 'Imagem deve ter pelo menos 300x300 pixels');
        } else {
            showSuccess('arquivo');
            $('#arquivo-success').text('‚úì Arquivo v√°lido (' + this.width + 'x' + this.height + ')');
        }
    };
    img.src = URL.createObjectURL(file);
});

// ‚úÖ Valida√ß√£o condicional
$('#tipo-usuario').change(function() {
    var tipo = $(this).val();
    
    if (tipo === 'empresa') {
        $('#cnpj-field').show().find('input').prop('required', true);
        $('#cpf-field').hide().find('input').prop('required', false);
    } else if (tipo === 'pessoa') {
        $('#cpf-field').show().find('input').prop('required', true);
        $('#cnpj-field').hide().find('input').prop('required', false);
    } else {
        $('#cnpj-field, #cpf-field').hide().find('input').prop('required', false);
    }
});

// ‚úÖ Valida√ß√£o de CPF
function validarCPF(cpf) {
    cpf = cpf.replace(/\D/g, '');
    
    if (cpf.length !== 11 || /^(\d)\1{10}$/.test(cpf)) {
        return false;
    }
    
    var soma = 0;
    for (var i = 0; i < 9; i++) {
        soma += parseInt(cpf.charAt(i)) * (10 - i);
    }
    var resto = 11 - (soma % 11);
    if (resto === 10 || resto === 11) resto = 0;
    if (resto !== parseInt(cpf.charAt(9))) return false;
    
    soma = 0;
    for (var i = 0; i < 10; i++) {
        soma += parseInt(cpf.charAt(i)) * (11 - i);
    }
    resto = 11 - (soma % 11);
    if (resto === 10 || resto === 11) resto = 0;
    return resto === parseInt(cpf.charAt(10));
}

$('#cpf').on('blur', function() {
    var cpf = $(this).val();
    if (cpf && !validarCPF(cpf)) {
        showError('cpf', 'CPF inv√°lido');
    } else if (cpf) {
        showSuccess('cpf');
    }
});

// ‚úÖ Valida√ß√£o de CNPJ
function validarCNPJ(cnpj) {
    cnpj = cnpj.replace(/\D/g, '');
    
    if (cnpj.length !== 14 || /^(\d)\1{13}$/.test(cnpj)) {
        return false;
    }
    
    var tamanho = cnpj.length - 2;
    var numeros = cnpj.substring(0, tamanho);
    var digitos = cnpj.substring(tamanho);
    var soma = 0;
    var pos = tamanho - 7;
    
    for (var i = tamanho; i >= 1; i--) {
        soma += numeros.charAt(tamanho - i) * pos--;
        if (pos < 2) pos = 9;
    }
    
    var resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
    if (resultado !== parseInt(digitos.charAt(0))) return false;
    
    tamanho = tamanho + 1;
    numeros = cnpj.substring(0, tamanho);
    soma = 0;
    pos = tamanho - 7;
    
    for (var i = tamanho; i >= 1; i--) {
        soma += numeros.charAt(tamanho - i) * pos--;
        if (pos < 2) pos = 9;
    }
    
    resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
    return resultado === parseInt(digitos.charAt(1));
}

$('#cnpj').on('blur', function() {
    var cnpj = $(this).val();
    if (cnpj && !validarCNPJ(cnpj)) {
        showError('cnpj', 'CNPJ inv√°lido');
    } else if (cnpj) {
        showSuccess('cnpj');
    }
});

// ‚úÖ Valida√ß√£o de CEP com busca autom√°tica
$('#cep').on('blur', function() {
    var cep = $(this).val().replace(/\D/g, '');
    
    if (cep.length === 8) {
        $(this).next('.loading').show();
        
        $.getJSON('https://viacep.com.br/ws/' + cep + '/json/')
            .done(function(data) {
                if (data.erro) {
                    showError('cep', 'CEP n√£o encontrado');
                } else {
                    showSuccess('cep');
                    $('#endereco').val(data.logradouro);
                    $('#bairro').val(data.bairro);
                    $('#cidade').val(data.localidade);
                    $('#estado').val(data.uf);
                }
            })
            .fail(function() {
                showError('cep', 'Erro ao buscar CEP');
            })
            .always(function() {
                $(this).next('.loading').hide();
            });
    }
});</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Mensagens de Valida√ß√£o Din√¢micas</h3>
  <p>Sistema de mensagens que se adaptam ao contexto e fornecem feedback √∫til aos usu√°rios.</p>
</article>

<article class="item">
  <h4>Sistema de mensagens din√¢micas:</h4>
  <pre><code>// ‚úÖ Sistema de mensagens din√¢micas
var validationMessages = {
    required: 'Este campo √© obrigat√≥rio',
    email: {
        invalid: 'Email deve ter um formato v√°lido',
        alreadyExists: 'Este email j√° est√° cadastrado',
        notFound: 'Email n√£o encontrado'
    },
    password: {
        tooShort: 'Senha deve ter pelo menos 8 caracteres',
        noUppercase: 'Senha deve conter pelo menos uma letra mai√∫scula',
        noLowercase: 'Senha deve conter pelo menos uma letra min√∫scula',
        noNumber: 'Senha deve conter pelo menos um n√∫mero',
        noSpecialChar: 'Senha deve conter pelo menos um caractere especial'
    },
    phone: {
        invalid: 'Telefone deve estar no formato (11) 99999-9999',
        tooShort: 'Telefone deve ter 10 ou 11 d√≠gitos'
    },
    file: {
        tooBig: 'Arquivo deve ter menos de {maxSize}MB',
        wrongType: 'Tipo de arquivo n√£o permitido. Permitidos: {allowedTypes}',
        tooSmall: 'Imagem deve ter pelo menos {minWidth}x{minHeight} pixels'
    }
};

// ‚úÖ Fun√ß√£o para gerar mensagens din√¢micas
function getDynamicMessage(type, field, context) {
    var message = validationMessages[type];
    
    if (typeof message === 'string') {
        return message;
    }
    
    if (typeof message === 'object') {
        var specificMessage = message[context] || message.invalid;
        
        // Substituir placeholders
        if (context && context.includes('{')) {
            specificMessage = specificMessage.replace(/{(\w+)}/g, function(match, key) {
                return field[key] || match;
            });
        }
        
        return specificMessage;
    }
    
    return 'Valida√ß√£o falhou';
}

// ‚úÖ Valida√ß√£o de senha com mensagens espec√≠ficas
function validatePassword(password) {
    var errors = [];
    
    if (password.length < 8) {
        errors.push(getDynamicMessage('password', {}, 'tooShort'));
    }
    
    if (!/[A-Z]/.test(password)) {
        errors.push(getDynamicMessage('password', {}, 'noUppercase'));
    }
    
    if (!/[a-z]/.test(password)) {
        errors.push(getDynamicMessage('password', {}, 'noLowercase'));
    }
    
    if (!/\d/.test(password)) {
        errors.push(getDynamicMessage('password', {}, 'noNumber'));
    }
    
    if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
        errors.push(getDynamicMessage('password', {}, 'noSpecialChar'));
    }
    
    return {
        valid: errors.length === 0,
        errors: errors
    };
}

$('#senha').on('input', function() {
    var password = $(this).val();
    var validation = validatePassword(password);
    
    if (password.length > 0) {
        if (validation.valid) {
            showSuccess('senha');
            $('#senha-success').text('‚úì Senha forte');
        } else {
            showError('senha', validation.errors.join(', '));
        }
    }
});

// ‚úÖ Indicador de for√ßa da senha
function updatePasswordStrength(password) {
    var strength = 0;
    var strengthText = '';
    var strengthColor = '';
    
    if (password.length >= 8) strength++;
    if (/[A-Z]/.test(password)) strength++;
    if (/[a-z]/.test(password)) strength++;
    if (/\d/.test(password)) strength++;
    if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) strength++;
    
    switch (strength) {
        case 0:
        case 1:
            strengthText = 'Muito fraca';
            strengthColor = '#dc3545';
            break;
        case 2:
            strengthText = 'Fraca';
            strengthColor = '#fd7e14';
            break;
        case 3:
            strengthText = 'M√©dia';
            strengthColor = '#ffc107';
            break;
        case 4:
            strengthText = 'Forte';
            strengthColor = '#20c997';
            break;
        case 5:
            strengthText = 'Muito forte';
            strengthColor = '#28a745';
            break;
    }
    
    $('#password-strength').text(strengthText).css('color', strengthColor);
    $('#password-strength-bar').css({
        'width': (strength * 20) + '%',
        'background-color': strengthColor
    });
}

// ‚úÖ Valida√ß√£o em tempo real com debounce
function debounce(func, wait) {
    var timeout;
    return function executedFunction() {
        var later = function() {
            clearTimeout(timeout);
            func.apply(this, arguments);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

var debouncedValidation = debounce(function(fieldName, value) {
    validateField(fieldName, value);
}, 300);

$('input, select, textarea').on('input', function() {
    var fieldName = $(this).attr('name');
    var value = $(this).val();
    
    if (fieldName === 'senha') {
        updatePasswordStrength(value);
    }
    
    debouncedValidation(fieldName, value);
});

// ‚úÖ Contador de caracteres
$('textarea[maxlength], input[maxlength]').each(function() {
    var $field = $(this);
    var maxLength = parseInt($field.attr('maxlength'));
    var $counter = $('<div class="char-counter">0 / ' + maxLength + '</div>');
    
    $field.after($counter);
    
    $field.on('input', function() {
        var length = $(this).val().length;
        $counter.text(length + ' / ' + maxLength);
        
        if (length > maxLength * 0.9) {
            $counter.css('color', '#dc3545');
        } else if (length > maxLength * 0.7) {
            $counter.css('color', '#ffc107');
        } else {
            $counter.css('color', '#6c757d');
        }
    });
});</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Exemplo Pr√°tico - Formul√°rio Completo</h3>
  <p>Vamos criar um formul√°rio completo que demonstra todas as t√©cnicas de valida√ß√£o aprendidas.</p>
</article>

<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/cursos/jquery/06/images/formulario_completo_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/cursos/jquery/06/images/formulario_completo_tablet.png">
    <img src="/vitrine-ml5/mlab5/cursos/jquery/06/images/formulario_completo_mobile.png">
  </picture>
</article>
</section>

<span id="exercicio">
<p>Crie uma aplica√ß√£o HTML com jQuery que implemente valida√ß√£o de formul√°rios:<p>
  <ul>
  <li>T√≠tulo = Sistema de Valida√ß√£o de Formul√°rios jQuery<br></li>
  <li>Implemente valida√ß√£o em tempo real<br></li>
  <li>Crie valida√ß√£o customizada para diferentes tipos de campo<br></li>
  <li>Desenvolva mensagens de erro din√¢micas<br></li>
  <li>Adicione valida√ß√£o de arquivos<br></li>
  <li>Implemente valida√ß√£o ass√≠ncrona<br></li>
  <li>Use feedback visual (cores, √≠cones, mensagens)<br></li>
</ul>
</p>Inclua pelo menos 8 tipos diferentes de valida√ß√£o e 10 campos de formul√°rio.</p>
</span>

  <form id="controles">
    <fieldset>
      <legend>Controles</legend>
    <h4>Escolha um template</h4>
    <select id="templateSelect">
      <option value="/vitrine-ml5/mlab5/templates/classico.html">Classico</option>
      <option value="/vitrine-ml5/mlab5/templates/moderno.html">Moderno</option>
      <option value="/vitrine-ml5/mlab5/templates/dark_mode.html">Dark Mode3</option>
    </select>

    <h4>Personalize</h4>
    <label>Cor de fundo: <input type="color" id="bgColor" value="#ffffff"></label><br>
    <label>Cor do texto: <input type="color" id="textColor" value="#000000"></label><br><br>

    <label>Fonte:
      <select id="fontFamily">
        <option value="Arial, sans-serif">Arial</option>
        <option value="Georgia, serif">Georgia</option>
        <option value="'Courier New', monospace">Courier New</option>
      </select><br>
    </label><br><br>
    </fieldset><br>
    <button onclick="salvarCustomizacao()">Salvar e Visualizar</button>
  </form>

<section class="container">
<article class="item">
    <a href="/vitrine-ml5/mlab5/playground" id="download-button" class="btn-large waves-effect waves-light teal lighten-1" >Playground</a>
</article>
</section>

</main>

<div id="footer-placeholder"></div>

<script>
  async function loadComponent(placeholderId, url) {
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error(`Erro ao carregar ${url}`);
      const html = await response.text();
      document.getElementById(placeholderId).innerHTML = html;
    } catch (error) {
      console.error(error);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    loadComponent('header-placeholder', '/vitrine-ml5/mlab5/js/ui/components/header.html')
      .then(() => {
        const script = document.createElement('script');
        script.src = '/vitrine-ml5/mlab5/js/ui/components/navbar.js';
        document.body.appendChild(script);
      })
      .catch(error => {
        console.error("Erro ao carregar o header:", error);
      });

    loadComponent('footer-placeholder', '/vitrine-ml5/mlab5/js/ui/components/footer.html');
  });

  document.addEventListener('DOMContentLoaded', () => {
    const exercicio = document.getElementById('exercicio')?.innerText || "";
    const playgroundLink = document.querySelector('a[href="/vitrine-ml5/mlab5/playground"]'); 

    if (playgroundLink) {
      playgroundLink.addEventListener('click', (event) => {
        event.preventDefault();

        // Salva o texto das instru√ß√µes
        localStorage.setItem('instrucoes', exercicio);

        // Salva o HTML do formul√°rio inteiro
        const controles = document.getElementById('controles');
        localStorage.setItem('ajustes', controles.outerHTML);

        // Redireciona para o playground
        window.location.href = playgroundLink.href;
      });
    }
  });
</script>

</body>
</html>
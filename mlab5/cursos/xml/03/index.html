<!--curso_xml/03/index.html-->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="icon" type="image/x-icon" href="/vitrine-ml5/mlab5/images/ml5w3s.ico">
  <title>Aula 03 - XML e NFe (Nota Fiscal Eletr√¥nica) | ML5Lab</title>

  <!-- SEO  -->
  <meta name="description" content="Aprenda sobre XML na Nota Fiscal Eletr√¥nica (NFe) no Brasil. Estrutura, valida√ß√£o e processamento de documentos fiscais XML.">
  <meta name="keywords" content="xml, nfe, nota fiscal eletr√¥nica, brasil, receita federal, documentos fiscais, xml schema, valida√ß√£o">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ml5w3s.com.br/">
  <meta http-equiv="content-language" content="pt-BR">

  <!-- OG -->
  <meta property="og:title" content="Aula 03 - XML e NFe (Nota Fiscal Eletr√¥nica) | ML5Lab">
  <meta property="og:description" content="Aprenda sobre XML na Nota Fiscal Eletr√¥nica (NFe) no Brasil. Estrutura, valida√ß√£o e processamento de documentos fiscais XML.">
  <meta property="og:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
  <meta property="og:url" content="http://ml5w3s.com.br">
  <meta property="og:type" content="website">

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="/vitrine-ml5/mlab5/css/base.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <style>#exercicios, #controles{display:none;}</style>
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Aula 03 - XML e NFe (Nota Fiscal Eletr√¥nica) | ML5Lab">
  <meta name="twitter:description" content="Aprenda sobre XML na Nota Fiscal Eletr√¥nica (NFe) no Brasil. Estrutura, valida√ß√£o e processamento de documentos fiscais XML.">
  <meta name="twitter:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
</head>

<body>

<!-- COMPONENTES -->
<div id="header-placeholder"></div>
<main id="aulas">

<!-- ARTIGOS -->
<section class="container">
<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/images/banner_frontend_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/images/banner_frontend_tablet.png">
    <img src="/vitrine-ml5/mlab5/images/banner_frontend_mobile.png">
  </picture>
  <h3>üìÑ XML - Nota Fiscal Eletr√¥nica (NFe)</h3>
</article>
</section>

<section class="container">
<!--INSTRU√á√ïES-->
<article class="item">
  <h3>XML na NFe no Brasil</h3>
  <p>A Nota Fiscal Eletr√¥nica (NFe) √© um dos maiores exemplos de uso de XML no Brasil. Desde 2008, a Receita Federal utiliza XML como formato padr√£o para a transmiss√£o e armazenamento de documentos fiscais, revolucionando o sistema tribut√°rio brasileiro.</p>
  <h4>Import√¢ncia da NFe em XML:</h4>
  <ul class="left_list">
    <li>Padroniza√ß√£o nacional de documentos fiscais</li>
    <li>Interoperabilidade entre sistemas</li>
    <li>Auditoria e fiscaliza√ß√£o automatizada</li>
    <li>Redu√ß√£o de fraudes fiscais</li>
    <li>Integra√ß√£o com sistemas ERP</li>
    <li>Armazenamento digital obrigat√≥rio</li>
  </ul>
</article>

<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/cursos/xml/03/images/nfe_estrutura_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/cursos/xml/03/images/nfe_estrutura_tablet.png">
    <img src="/vitrine-ml5/mlab5/cursos/xml/03/images/nfe_estrutura_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Estrutura B√°sica do XML NFe</h3>
  <p>O XML da NFe segue uma estrutura hier√°rquica rigorosa, definida pela Receita Federal, com elementos obrigat√≥rios e opcionais bem espec√≠ficos.</p>
  <h4>Elementos Principais:</h4>
  <ul class="left_list">
    <li>infNFe - Informa√ß√µes da nota fiscal</li>
    <li>ide - Identifica√ß√£o da NFe</li>
    <li>emit - Dados do emitente</li>
    <li>dest - Dados do destinat√°rio</li>
    <li>det - Detalhes dos produtos/servi√ßos</li>
    <li>total - Totais da NFe</li>
    <li>transp - Dados do transporte</li>
    <li>cobr - Dados da cobran√ßa</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo de Estrutura NFe:</h4>
  <pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;nfeProc xmlns="http://www.portalfiscal.inf.br/nfe"&gt;
  &lt;NFe&gt;
    &lt;infNFe Id="NFe35200114200166000187550010000000001234567890"&gt;
      &lt;ide&gt;
        &lt;cUF&gt;35&lt;/cUF&gt;
        &lt;cNF&gt;12345678&lt;/cNF&gt;
        &lt;natOp&gt;Venda&lt;/natOp&gt;
        &lt;mod&gt;55&lt;/mod&gt;
        &lt;serie&gt;1&lt;/serie&gt;
        &lt;nNF&gt;1&lt;/nNF&gt;
        &lt;dhEmi&gt;2023-01-15T10:30:00-03:00&lt;/dhEmi&gt;
      &lt;/ide&gt;
      &lt;emit&gt;
        &lt;CNPJ&gt;14200166000187&lt;/CNPJ&gt;
        &lt;xNome&gt;Empresa Exemplo LTDA&lt;/xNome&gt;
      &lt;/emit&gt;
    &lt;/infNFe&gt;
  &lt;/NFe&gt;
&lt;/nfeProc&gt;</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Valida√ß√£o e Schema NFe</h3>
  <p>A NFe utiliza XML Schema (XSD) para valida√ß√£o rigorosa dos documentos, garantindo conformidade com as regras fiscais brasileiras.</p>
  <h4>Schemas Principais:</h4>
  <ul class="left_list">
    <li>nfe_v4.00.xsd - Schema principal da NFe</li>
    <li>tiposBasico_v4.00.xsd - Tipos b√°sicos</li>
    <li>leiauteNFe_v4.00.xsd - Layout da NFe</li>
    <li>procNFe_v4.00.xsd - Processamento</li>
    <li>ConsNFeDest_v4.00.xsd - Consulta</li>
  </ul>
</article>

<article class="item">
  <h4>Valida√ß√£o XML NFe:</h4>
  <pre><code>&lt;!-- Declara√ß√£o de namespace --&gt;
&lt;nfeProc xmlns="http://www.portalfiscal.inf.br/nfe"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.portalfiscal.inf.br/nfe 
         nfe_v4.00.xsd"&gt;

&lt;!-- Valida√ß√£o de campos obrigat√≥rios --&gt;
&lt;ide&gt;
  &lt;cUF&gt;35&lt;/cUF&gt;                    &lt;!-- Obrigat√≥rio --&gt;
  &lt;natOp&gt;Venda&lt;/natOp&gt;             &lt;!-- Obrigat√≥rio --&gt;
  &lt;mod&gt;55&lt;/mod&gt;                    &lt;!-- 55=NFe, 65=NFCe --&gt;
  &lt;serie&gt;1&lt;/serie&gt;                 &lt;!-- 1-999 --&gt;
  &lt;nNF&gt;1&lt;/nNF&gt;                    &lt;!-- Numera√ß√£o sequencial --&gt;
  &lt;dhEmi&gt;2023-01-15T10:30:00-03:00&lt;/dhEmi&gt;
  &lt;tpNF&gt;1&lt;/tpNF&gt;                  &lt;!-- 1=Sa√≠da, 0=Entrada --&gt;
  &lt;idDest&gt;1&lt;/idDest&gt;              &lt;!-- 1=Opera√ß√£o interna --&gt;
&lt;/ide&gt;</code></pre>

  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/cursos/xml/03/images/validacao_nfe_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/cursos/xml/03/images/validacao_nfe_tablet.png">
    <img src="/vitrine-ml5/mlab5/cursos/xml/03/images/validacao_nfe_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Elementos de Produtos e Servi√ßos</h3>
  <p>A se√ß√£o de detalhes (det) √© uma das mais complexas da NFe, contendo informa√ß√µes detalhadas sobre cada produto ou servi√ßo comercializado.</p>
  <h4>Estrutura do Elemento det:</h4>
  <ul class="left_list">
    <li>nItem - N√∫mero sequencial do item</li>
    <li>prod - Dados do produto</li>
    <li>imposto - Impostos incidentes</li>
    <li>infAdProd - Informa√ß√µes adicionais</li>
    <li>obsItem - Observa√ß√µes do item</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo de Produto na NFe:</h4>
  <pre><code>&lt;det nItem="1"&gt;
  &lt;prod&gt;
    &lt;cProd&gt;001&lt;/cProd&gt;                    &lt;!-- C√≥digo do produto --&gt;
    &lt;cEAN&gt;7891234567890&lt;/cEAN&gt;           &lt;!-- GTIN/EAN --&gt;
    &lt;xProd&gt;Produto Exemplo&lt;/xProd&gt;        &lt;!-- Descri√ß√£o --&gt;
    &lt;NCM&gt;12345678&lt;/NCM&gt;                  &lt;!-- Classifica√ß√£o fiscal --&gt;
    &lt;CFOP&gt;5102&lt;/CFOP&gt;                    &lt;!-- C√≥digo fiscal --&gt;
    &lt;uCom&gt;UN&lt;/uCom&gt;                      &lt;!-- Unidade comercial --&gt;
    &lt;qCom&gt;10.0000&lt;/qCom&gt;                 &lt;!-- Quantidade --&gt;
    &lt;vUnCom&gt;100.0000000000&lt;/vUnCom&gt;      &lt;!-- Valor unit√°rio --&gt;
    &lt;vProd&gt;1000.00&lt;/vProd&gt;               &lt;!-- Valor total --&gt;
    &lt;cEANTrib&gt;7891234567890&lt;/cEANTrib&gt;   &lt;!-- GTIN tribut√°rio --&gt;
    &lt;uTrib&gt;UN&lt;/uTrib&gt;                    &lt;!-- Unidade tribut√°vel --&gt;
    &lt;qTrib&gt;10.0000&lt;/qTrib&gt;               &lt;!-- Quantidade tribut√°vel --&gt;
    &lt;vUnTrib&gt;100.0000000000&lt;/vUnTrib&gt;   &lt;!-- Valor unit√°rio tribut√°vel --&gt;
  &lt;/prod&gt;
  &lt;imposto&gt;
    &lt;ICMS&gt;
      &lt;ICMS00&gt;
        &lt;orig&gt;0&lt;/orig&gt;                  &lt;!-- Origem da mercadoria --&gt;
        &lt;CST&gt;00&lt;/CST&gt;                   &lt;!-- Tributa√ß√£o ICMS --&gt;
        &lt;modBC&gt;3&lt;/modBC&gt;                &lt;!-- Modalidade BC --&gt;
        &lt;vBC&gt;1000.00&lt;/vBC&gt;              &lt;!-- Base de c√°lculo --&gt;
        &lt;pICMS&gt;18.00&lt;/pICMS&gt;            &lt;!-- Al√≠quota ICMS --&gt;
        &lt;vICMS&gt;180.00&lt;/vICMS&gt;           &lt;!-- Valor ICMS --&gt;
      &lt;/ICMS00&gt;
    &lt;/ICMS&gt;
  &lt;/imposto&gt;
&lt;/det&gt;</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Impostos na NFe</h3>
  <p>A NFe cont√©m informa√ß√µes detalhadas sobre todos os impostos incidentes, incluindo ICMS, IPI, PIS, COFINS e ISS, conforme a legisla√ß√£o tribut√°ria brasileira.</p>
  <h4>Tipos de Impostos:</h4>
  <ul class="left_list">
    <li>ICMS - Imposto sobre Circula√ß√£o de Mercadorias</li>
    <li>IPI - Imposto sobre Produtos Industrializados</li>
    <li>PIS - Programa de Integra√ß√£o Social</li>
    <li>COFINS - Contribui√ß√£o para Financiamento da Seguridade</li>
    <li>ISS - Imposto sobre Servi√ßos</li>
    <li>II - Imposto de Importa√ß√£o</li>
  </ul>
</article>

<article class="item">
  <h4>Estrutura de Impostos:</h4>
  <pre><code>&lt;imposto&gt;
  &lt;!-- ICMS --&gt;
  &lt;ICMS&gt;
    &lt;ICMS00&gt;
      &lt;orig&gt;0&lt;/orig&gt;                    &lt;!-- 0=Nacional --&gt;
      &lt;CST&gt;00&lt;/CST&gt;                     &lt;!-- 00=Tributada integralmente --&gt;
      &lt;modBC&gt;3&lt;/modBC&gt;                  &lt;!-- 3=Valor da opera√ß√£o --&gt;
      &lt;vBC&gt;1000.00&lt;/vBC&gt;
      &lt;pICMS&gt;18.00&lt;/pICMS&gt;
      &lt;vICMS&gt;180.00&lt;/vICMS&gt;
    &lt;/ICMS00&gt;
  &lt;/ICMS&gt;
  
  &lt;!-- IPI --&gt;
  &lt;IPI&gt;
    &lt;cEnq&gt;999&lt;/cEnq&gt;
    &lt;IPITrib&gt;
      &lt;CST&gt;50&lt;/CST&gt;                     &lt;!-- 50=Suspens√£o --&gt;
    &lt;/IPITrib&gt;
  &lt;/IPI&gt;
  
  &lt;!-- PIS --&gt;
  &lt;PIS&gt;
    &lt;PISAliq&gt;
      &lt;CST&gt;01&lt;/CST&gt;                     &lt;!-- 01=Opera√ß√£o tribut√°vel --&gt;
      &lt;vBC&gt;1000.00&lt;/vBC&gt;
      &lt;pPIS&gt;1.65&lt;/pPIS&gt;
      &lt;vPIS&gt;16.50&lt;/vPIS&gt;
    &lt;/PISAliq&gt;
  &lt;/PIS&gt;
&lt;/imposto&gt;</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Totais e Informa√ß√µes Complementares</h3>
  <p>A se√ß√£o de totais consolida todos os valores da NFe, incluindo impostos, descontos e valores finais, sendo fundamental para a valida√ß√£o fiscal.</p>
  <h4>Elementos de Totaliza√ß√£o:</h4>
  <ul class="left_list">
    <li>ICMSTot - Totais do ICMS</li>
    <li>ISSQNTot - Totais do ISS</li>
    <li>retTrib - Reten√ß√µes tribut√°rias</li>
    <li>vNF - Valor total da NFe</li>
    <li>vTotTrib - Total dos tributos</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo de Totais:</h4>
  <pre><code>&lt;total&gt;
  &lt;ICMSTot&gt;
    &lt;vBC&gt;1000.00&lt;/vBC&gt;                 &lt;!-- Base de c√°lculo ICMS --&gt;
    &lt;vICMS&gt;180.00&lt;/vICMS&gt;              &lt;!-- Valor ICMS --&gt;
    &lt;vICMSDeson&gt;0.00&lt;/vICMSDeson&gt;      &lt;!-- ICMS desonerado --&gt;
    &lt;vFCP&gt;0.00&lt;/vFCP&gt;                  &lt;!-- Fundo Combate Pobreza --&gt;
    &lt;vBCST&gt;0.00&lt;/vBCST&gt;                &lt;!-- Base ICMS ST --&gt;
    &lt;vST&gt;0.00&lt;/vST&gt;                    &lt;!-- Valor ICMS ST --&gt;
    &lt;vFCPST&gt;0.00&lt;/vFCPST&gt;              &lt;!-- FCP ST --&gt;
    &lt;vFCPSTRet&gt;0.00&lt;/vFCPSTRet&gt;        &lt;!-- FCP ST Retido --&gt;
    &lt;vProd&gt;1000.00&lt;/vProd&gt;             &lt;!-- Valor dos produtos --&gt;
    &lt;vFrete&gt;0.00&lt;/vFrete&gt;              &lt;!-- Valor do frete --&gt;
    &lt;vSeg&gt;0.00&lt;/vSeg&gt;                  &lt;!-- Valor do seguro --&gt;
    &lt;vDesc&gt;0.00&lt;/vDesc&gt;                &lt;!-- Desconto --&gt;
    &lt;vII&gt;0.00&lt;/vII&gt;                    &lt;!-- Imposto Importa√ß√£o --&gt;
    &lt;vIPI&gt;0.00&lt;/vIPI&gt;                  &lt;!-- Valor IPI --&gt;
    &lt;vIPIDevol&gt;0.00&lt;/vIPIDevol&gt;        &lt;!-- IPI Devolvido --&gt;
    &lt;vPIS&gt;16.50&lt;/vPIS&gt;                 &lt;!-- Valor PIS --&gt;
    &lt;vCOFINS&gt;76.50&lt;/vCOFINS&gt;           &lt;!-- Valor COFINS --&gt;
    &lt;vOutro&gt;0.00&lt;/vOutro&gt;              &lt;!-- Outras despesas --&gt;
    &lt;vNF&gt;1000.00&lt;/vNF&gt;                 &lt;!-- Valor total NFe --&gt;
    &lt;vTotTrib&gt;273.00&lt;/vTotTrib&gt;        &lt;!-- Total dos tributos --&gt;
  &lt;/ICMSTot&gt;
&lt;/total&gt;</code></pre>

  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/cursos/xml/03/images/totais_nfe_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/cursos/xml/03/images/totais_nfe_tablet.png">
    <img src="/vitrine-ml5/mlab5/cursos/xml/03/images/totais_nfe_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Processamento e Autoriza√ß√£o</h3>
  <p>Ap√≥s a valida√ß√£o, a NFe √© processada pela Receita Federal, que retorna um XML de autoriza√ß√£o com protocolo e chave de acesso.</p>
  <h4>Fluxo de Processamento:</h4>
  <ul class="left_list">
    <li>Valida√ß√£o do XML contra o schema</li>
    <li>Envio para a Receita Federal</li>
    <li>Processamento e autoriza√ß√£o</li>
    <li>Retorno do protocolo</li>
    <li>Gera√ß√£o da chave de acesso</li>
    <li>Armazenamento obrigat√≥rio</li>
  </ul>
</article>

<article class="item">
  <h4>XML de Resposta:</h4>
  <pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;nfeProc xmlns="http://www.portalfiscal.inf.br/nfe"&gt;
  &lt;NFe xmlns="http://www.portalfiscal.inf.br/nfe"&gt;
    &lt;!-- XML da NFe original --&gt;
  &lt;/NFe&gt;
  &lt;protNFe xmlns="http://www.portalfiscal.inf.br/nfe"&gt;
    &lt;infProt&gt;
      &lt;tpAmb&gt;2&lt;/tpAmb&gt;                 &lt;!-- 1=Produ√ß√£o, 2=Homologa√ß√£o --&gt;
      &lt;verAplic&gt;SP_NFE_PL_008i2&lt;/verAplic&gt;
      &lt;chNFe&gt;35200114200166000187550010000000001234567890&lt;/chNFe&gt;
      &lt;dhRecbto&gt;2023-01-15T10:35:00-03:00&lt;/dhRecbto&gt;
      &lt;nProt&gt;135230001234567&lt;/nProt&gt;
      &lt;digVal&gt;abc123def456...&lt;/digVal&gt;
      &lt;cStat&gt;100&lt;/cStat&gt;              &lt;!-- 100=Autorizado --&gt;
      &lt;xMotivo&gt;Autorizado o uso da NF-e&lt;/xMotivo&gt;
    &lt;/infProt&gt;
  &lt;/protNFe&gt;
&lt;/nfeProc&gt;</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Integra√ß√£o com Sistemas ERP</h3>
  <p>A NFe em XML permite integra√ß√£o eficiente com sistemas ERP, automatizando processos fiscais e reduzindo erros manuais.</p>
  <h4>Benef√≠cios da Integra√ß√£o:</h4>
  <ul class="left_list">
    <li>Automa√ß√£o da emiss√£o de NFe</li>
    <li>Sincroniza√ß√£o com estoque</li>
    <li>Controle fiscal automatizado</li>
    <li>Relat√≥rios fiscais integrados</li>
    <li>Auditoria simplificada</li>
    <li>Compliance tribut√°rio</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplo de Integra√ß√£o:</h4>
  <pre><code>&lt;!-- Dados do emitente do ERP --&gt;
&lt;emit&gt;
  &lt;CNPJ&gt;14200166000187&lt;/CNPJ&gt;
  &lt;xNome&gt;Empresa Exemplo LTDA&lt;/xNome&gt;
  &lt;xFant&gt;Exemplo&lt;/xFant&gt;
  &lt;enderEmit&gt;
    &lt;xLgr&gt;Rua das Flores&lt;/xLgr&gt;
    &lt;nro&gt;123&lt;/nro&gt;
    &lt;xBairro&gt;Centro&lt;/xBairro&gt;
    &lt;cMun&gt;3550308&lt;/cMun&gt;              &lt;!-- C√≥digo IBGE --&gt;
    &lt;xMun&gt;S√£o Paulo&lt;/xMun&gt;
    &lt;UF&gt;SP&lt;/UF&gt;
    &lt;CEP&gt;01234567&lt;/CEP&gt;
    &lt;cPais&gt;1058&lt;/cPais&gt;               &lt;!-- Brasil --&gt;
    &lt;xPais&gt;Brasil&lt;/xPais&gt;
    &lt;fone&gt;1133334444&lt;/fone&gt;
  &lt;/enderEmit&gt;
  &lt;IE&gt;123456789012&lt;/IE&gt;               &lt;!-- Inscri√ß√£o Estadual --&gt;
  &lt;CRT&gt;3&lt;/CRT&gt;                        &lt;!-- 3=Regime Normal --&gt;
&lt;/emit&gt;</code></pre>

  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/cursos/xml/03/images/integracao_erp_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/cursos/xml/03/images/integracao_erp_tablet.png">
    <img src="/vitrine-ml5/mlab5/cursos/xml/03/images/integracao_erp_mobile.png">
  </picture>
</article>
</section>

<span id="exercicio">
<p>Crie uma estrutura XML b√°sica de NFe com:<p>
  <ul>
  <li>T√≠tulo = Estrutura XML de NFe<br></li>
  <li>Identifica√ß√£o = Elementos ide com dados b√°sicos<br></li>
  <li>Emitente = Dados da empresa emissora<br></li>
  <li>Destinat√°rio = Dados do cliente<br></li>
  <li>Produto = Pelo menos um item com impostos<br></li>
  <li>Totais = Consolida√ß√£o de valores e impostos<br></li>
</ul>
</p>Use a estrutura oficial da Receita Federal e valide contra o schema XSD.</p>
</span>

  <form id="controles">
    <fieldset>
      <legend>Controles</legend>
    <h4>Escolha um template</h4>
    <select id="templateSelect">
      <option value="/vitrine-ml5/mlab5/templates/classico.html">Classico</option>
      <option value="/vitrine-ml5/mlab5/templates/moderno.html">Moderno</option>
      <option value="/vitrine-ml5/mlab5/templates/dark_mode.html">Dark Mode3</option>
    </select>

    <h4>Personalize</h4>
    <label>Cor de fundo: <input type="color" id="bgColor" value="#ffffff"></label><br>
    <label>Cor do texto: <input type="color" id="textColor" value="#000000"></label><br><br>

    <label>Fonte:
      <select id="fontFamily">
        <option value="Arial, sans-serif">Arial</option>
        <option value="Georgia, serif">Georgia</option>
        <option value="'Courier New', monospace">Courier New</option>
      </select><br>
    </label><br><br>
    </fieldset><br>
    <button onclick="salvarCustomizacao()">Salvar e Visualizar</button>
  </form>

<section class="container">
<article class="item">
    <a href="/vitrine-ml5/mlab5/playground" id="download-button" class="btn-large waves-effect waves-light teal lighten-1" >Playground</a>
</article>
</section>

</main>

<div id="footer-placeholder"></div>

<script>
  async function loadComponent(placeholderId, url) {
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error(`Erro ao carregar ${url}`);
      const html = await response.text();
      document.getElementById(placeholderId).innerHTML = html;
    } catch (error) {
      console.error(error);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    loadComponent('header-placeholder', '/vitrine-ml5/mlab5/js/ui/components/header.html')
      .then(() => {
        const script = document.createElement('script');
        script.src = '/vitrine-ml5/mlab5/js/ui/components/navbar.js';
        document.body.appendChild(script);
      })
      .catch(error => {
        console.error("Erro ao carregar o header:", error);
      });

    loadComponent('footer-placeholder', '/vitrine-ml5/mlab5/js/ui/components/footer.html');
  });

  document.addEventListener('DOMContentLoaded', () => {
    const exercicio = document.getElementById('exercicio')?.innerText || "";
    const playgroundLink = document.querySelector('a[href="/vitrine-ml5/mlab5/playground"]'); 

    if (playgroundLink) {
      playgroundLink.addEventListener('click', (event) => {
        event.preventDefault();

        // Salva o texto das instru√ß√µes
        localStorage.setItem('instrucoes', exercicio);

        // Salva o HTML do formul√°rio inteiro
        const controles = document.getElementById('controles');
        localStorage.setItem('ajustes', controles.outerHTML);

        // Redireciona para o playground
        window.location.href = playgroundLink.href;
      });
    }
  });
</script>

</body>
</html>

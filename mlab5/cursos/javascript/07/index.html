<!--curso_javascript/07/index.html-->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="icon" type="image/x-icon" href="/vitrine-ml5/mlab5/images/ml5w3s.ico">
  <title>Aula 07 - Boas Pr√°ticas e Arquitetura Moderna | ML5Lab</title>

  <!-- SEO  -->
  <meta name="description" content="Aprenda boas pr√°ticas JavaScript: modulariza√ß√£o, padr√µes de c√≥digo, MVC, componentiza√ß√£o e arquitetura moderna para aplica√ß√µes escal√°veis.">
  <meta name="keywords" content="javascript, boas pr√°ticas, arquitetura, mvc, modulariza√ß√£o, padr√µes c√≥digo, componentiza√ß√£o, clean code">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ml5w3s.com.br/">
  <meta http-equiv="content-language" content="pt-BR">

  <!-- OG -->
  <meta property="og:title" content="Aula 07 - Boas Pr√°ticas e Arquitetura Moderna | ML5Lab">
  <meta property="og:description" content="Aprenda boas pr√°ticas JavaScript: modulariza√ß√£o, padr√µes de c√≥digo, MVC, componentiza√ß√£o e arquitetura moderna para aplica√ß√µes escal√°veis.">
  <meta property="og:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
  <meta property="og:url" content="http://ml5w3s.com.br">
  <meta property="og:type" content="website">

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="/vitrine-ml5/mlab5/css/base.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <style>#exercicios, #controles{display:none;}</style>
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Aula 07 - Boas Pr√°ticas e Arquitetura Moderna | ML5Lab">
  <meta name="twitter:description" content="Aprenda boas pr√°ticas JavaScript: modulariza√ß√£o, padr√µes de c√≥digo, MVC, componentiza√ß√£o e arquitetura moderna para aplica√ß√µes escal√°veis.">
  <meta name="twitter:image" content="http://ml5w3s.com.br/images/banner_barramento.png">
</head>

<body>

<!-- COMPONENTES -->
<div id="header-placeholder"></div>
<main id="aulas">

<!-- ARTIGOS -->
<section class="container">
<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/images/banner_frontend_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/images/banner_frontend_tablet.png">
    <img src="/vitrine-ml5/mlab5/images/banner_frontend_mobile.png">
  </picture>
  <h3>üèóÔ∏è Boas Pr√°ticas e Arquitetura Moderna</h3>
</article>
</section>

<section class="container">
<!--INSTRU√á√ïES-->
<article class="item">
  <h3>Modulariza√ß√£o - Import/Export</h3>
  <p>A modulariza√ß√£o √© fundamental para criar c√≥digo JavaScript escal√°vel e manuten√≠vel. O ES6 introduziu um sistema de m√≥dulos que permite dividir c√≥digo em arquivos separados e reutiliz√°veis.</p>
  <h4>Vantagens da Modulariza√ß√£o:</h4>
  <ul class="left_list">
    <li><strong>Reutiliza√ß√£o:</strong> C√≥digo compartilhado entre projetos</li>
    <li><strong>Manutenibilidade:</strong> Facilita manuten√ß√£o e debugging</li>
    <li><strong>Organiza√ß√£o:</strong> Estrutura clara e l√≥gica</li>
    <li><strong>Testabilidade:</strong> M√≥dulos isolados s√£o mais f√°ceis de testar</li>
    <li><strong>Performance:</strong> Carregamento otimizado e tree-shaking</li>
  </ul>
</article>

<article class="item">
  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/cursos/javascript/07/images/modularizacao_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/cursos/javascript/07/images/modularizacao_tablet.png">
    <img src="/vitrine-ml5/mlab5/cursos/javascript/07/images/modularizacao_mobile.png">
  </picture>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Sistema de M√≥dulos ES6</h3>
  <p>O sistema de m√≥dulos ES6 oferece sintaxe declarativa para importar e exportar funcionalidades entre arquivos, criando uma arquitetura modular robusta.</p>
  <h4>Tipos de Export/Import:</h4>
  <ul class="left_list">
    <li><strong>Named exports:</strong> M√∫ltiplas exporta√ß√µes nomeadas</li>
    <li><strong>Default export:</strong> Exporta√ß√£o principal do m√≥dulo</li>
    <li><strong>Namespace import:</strong> Importar tudo como objeto</li>
    <li><strong>Re-export:</strong> Re-exportar de outros m√≥dulos</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplos de M√≥dulos:</h4>
  <pre><code>// ‚úÖ utils.js - Named exports
export const formatarData = (data) => {
  return new Date(data).toLocaleDateString('pt-BR');
};

export const formatarMoeda = (valor) => {
  return new Intl.NumberFormat('pt-BR', {
    style: 'currency',
    currency: 'BRL'
  }).format(valor);
};

export const validarEmail = (email) => {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
};

// ‚úÖ api.js - Default export + named exports
const API_BASE_URL = 'https://api.exemplo.com';

export default class ApiService {
  constructor(baseUrl = API_BASE_URL) {
    this.baseUrl = baseUrl;
  }
  
  async get(endpoint) {
    const response = await fetch(`${this.baseUrl}${endpoint}`);
    return response.json();
  }
  
  async post(endpoint, data) {
    const response = await fetch(`${this.baseUrl}${endpoint}`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    return response.json();
  }
}

export const criarApiService = (baseUrl) => new ApiService(baseUrl);

// ‚úÖ storage.js - M√≥dulo com funcionalidades relacionadas
class StorageManager {
  constructor(prefixo = 'app_') {
    this.prefixo = prefixo;
  }
  
  set(key, value) {
    try {
      const dados = typeof value === 'object' ? JSON.stringify(value) : value;
      localStorage.setItem(this.prefixo + key, dados);
      return true;
    } catch (erro) {
      console.error('Erro ao salvar:', erro);
      return false;
    }
  }
  
  get(key, defaultValue = null) {
    try {
      const item = localStorage.getItem(this.prefixo + key);
      if (item === null) return defaultValue;
      
      try {
        return JSON.parse(item);
      } catch {
        return item;
      }
    } catch (erro) {
      console.error('Erro ao ler:', erro);
      return defaultValue;
    }
  }
}

// Named exports
export const storage = new StorageManager();
export const createStorage = (prefixo) => new StorageManager(prefixo);

// ‚úÖ components.js - M√≥dulo de componentes
export class Modal {
  constructor(options = {}) {
    this.options = { ...this.defaultOptions, ...options };
    this.element = null;
    this.init();
  }
  
  get defaultOptions() {
    return {
      closable: true,
      size: 'medium',
      animation: true
    };
  }
  
  show(content) {
    // Implementa√ß√£o do modal
  }
}

export class Toast {
  static show(message, type = 'info') {
    // Implementa√ß√£o do toast
  }
}

// ‚úÖ index.js - Arquivo principal com imports
import ApiService, { criarApiService } from './api.js';
import { formatarData, formatarMoeda, validarEmail } from './utils.js';
import { storage, createStorage } from './storage.js';
import { Modal, Toast } from './components.js';

// ‚úÖ Uso dos m√≥dulos
const api = new ApiService();
const customStorage = createStorage('custom_');

// Buscar dados da API
async function carregarDados() {
  try {
    const dados = await api.get('/usuarios');
    
    // Processar dados
    const dadosFormatados = dados.map(usuario => ({
      ...usuario,
      dataFormatada: formatarData(usuario.criadoEm),
      salarioFormatado: formatarMoeda(usuario.salario)
    }));
    
    // Salvar no storage
    customStorage.set('usuarios', dadosFormatados);
    
    return dadosFormatados;
  } catch (erro) {
    Toast.show('Erro ao carregar dados', 'error');
    throw erro;
  }
}

// ‚úÖ Re-export - barrel exports
// components/index.js
export { Modal } from './Modal.js';
export { Toast } from './Toast.js';
export { Button } from './Button.js';
export { Input } from './Input.js';

// ‚úÖ Dynamic imports
async function carregarModuloDinamico() {
  try {
    const modulo = await import('./modulo-dinamico.js');
    return modulo.funcaoEspecial();
  } catch (erro) {
    console.error('Erro ao carregar m√≥dulo:', erro);
  }
}

// ‚úÖ Conditional imports
if (navigator.userAgent.includes('Chrome')) {
  const moduloChrome = await import('./chrome-specific.js');
  moduloChrome.init();
}</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Padr√µes de C√≥digo e Clean Code</h3>
  <p>Padr√µes de c√≥digo consistentes e princ√≠pios de Clean Code s√£o essenciais para criar aplica√ß√µes JavaScript manuten√≠veis e escal√°veis.</p>
  <h4>Princ√≠pios do Clean Code:</h4>
  <ul class="left_list">
    <li><strong>Nomes significativos:</strong> Vari√°veis e fun√ß√µes descritivas</li>
    <li><strong>Fun√ß√µes pequenas:</strong> Uma responsabilidade por fun√ß√£o</li>
    <li><strong>DRY:</strong> Don't Repeat Yourself</li>
    <li><strong>SRP:</strong> Single Responsibility Principle</li>
    <li><strong>Coment√°rios √∫teis:</strong> Explicar o "porqu√™", n√£o o "o que"</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplos de Clean Code:</h4>
  <pre><code>// ‚ùå C√≥digo ruim
function calc(d, t) {
  return d / t;
}

function process(data) {
  let result = [];
  for (let i = 0; i < data.length; i++) {
    if (data[i].active && data[i].score > 80) {
      result.push({
        n: data[i].name,
        s: data[i].score,
        d: new Date()
      });
    }
  }
  return result;
}

// ‚úÖ C√≥digo limpo
function calcularVelocidade(distancia, tempo) {
  if (tempo <= 0) {
    throw new Error('Tempo deve ser maior que zero');
  }
  return distancia / tempo;
}

function obterUsuariosAtivosComAltoScore(usuarios) {
  return usuarios
    .filter(usuario => usuario.ativo && usuario.pontuacao > 80)
    .map(usuario => ({
      nome: usuario.nome,
      pontuacao: usuario.pontuacao,
      dataProcessamento: new Date()
    }));
}

// ‚úÖ Nomes significativos
const ESTADO_CARREGAMENTO = {
  INICIANDO: 'iniciando',
  CARREGANDO: 'carregando',
  CONCLUIDO: 'concluido',
  ERRO: 'erro'
};

const CONFIGURACOES_PADRAO = {
  timeout: 5000,
  retryAttempts: 3,
  enableCache: true
};

// ‚úÖ Fun√ß√µes pequenas e focadas
class UsuarioValidator {
  validarNome(nome) {
    if (!nome || typeof nome !== 'string') {
      throw new Error('Nome √© obrigat√≥rio');
    }
    
    if (nome.trim().length < 2) {
      throw new Error('Nome deve ter pelo menos 2 caracteres');
    }
    
    return true;
  }
  
  validarEmail(email) {
    if (!email || typeof email !== 'string') {
      throw new Error('Email √© obrigat√≥rio');
    }
    
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      throw new Error('Email inv√°lido');
    }
    
    return true;
  }
  
  validarSenha(senha) {
    if (!senha || typeof senha !== 'string') {
      throw new Error('Senha √© obrigat√≥ria');
    }
    
    if (senha.length < 8) {
      throw new Error('Senha deve ter pelo menos 8 caracteres');
    }
    
    const temNumero = /\d/.test(senha);
    const temMaiuscula = /[A-Z]/.test(senha);
    const temMinuscula = /[a-z]/.test(senha);
    
    if (!temNumero || !temMaiuscula || !temMinuscula) {
      throw new Error('Senha deve conter n√∫mero, letra mai√∫scula e min√∫scula');
    }
    
    return true;
  }
  
  validarUsuario(usuario) {
    this.validarNome(usuario.nome);
    this.validarEmail(usuario.email);
    this.validarSenha(usuario.senha);
    return true;
  }
}

// ‚úÖ Constantes e configura√ß√µes
const MENSAGENS = {
  ERRO: {
    USUARIO_NAO_ENCONTRADO: 'Usu√°rio n√£o encontrado',
    EMAIL_JA_CADASTRADO: 'Email j√° est√° cadastrado',
    SENHA_INVALIDA: 'Senha inv√°lida'
  },
  SUCESSO: {
    USUARIO_CRIADO: 'Usu√°rio criado com sucesso',
    USUARIO_ATUALIZADO: 'Usu√°rio atualizado com sucesso',
    USUARIO_REMOVIDO: 'Usu√°rio removido com sucesso'
  }
};

// ‚úÖ Fun√ß√µes puras
function calcularDesconto(preco, percentualDesconto) {
  if (preco < 0) {
    throw new Error('Pre√ßo n√£o pode ser negativo');
  }
  
  if (percentualDesconto < 0 || percentualDesconto > 100) {
    throw new Error('Percentual deve estar entre 0 e 100');
  }
  
  return preco * (1 - percentualDesconto / 100);
}

function formatarEndereco(endereco) {
  if (!endereco) return '';
  
  const { rua, numero, bairro, cidade, estado, cep } = endereco;
  
  return `${rua}, ${numero} - ${bairro}, ${cidade}/${estado} - ${cep}`;
}

// ‚úÖ Tratamento de erros consistente
class ApiError extends Error {
  constructor(mensagem, status, codigo) {
    super(mensagem);
    this.name = 'ApiError';
    this.status = status;
    this.codigo = codigo;
  }
}

function criarErroValidacao(campo, mensagem) {
  const erro = new Error(mensagem);
  erro.name = 'ValidationError';
  erro.campo = campo;
  return erro;
}

// ‚úÖ Coment√°rios √∫teis
class CalculadoraImpostos {
  /**
   * Calcula o imposto de renda baseado no sal√°rio
   * @param {number} salario - Sal√°rio bruto
   * @param {number} dependentes - N√∫mero de dependentes
   * @returns {number} Valor do imposto
   */
  calcularIR(salario, dependentes = 0) {
    // Dedu√ß√£o por dependente (valor de 2023)
    const DEDUCAO_DEPENDENTE = 189.59;
    
    const salarioBase = salario - (dependentes * DEDUCAO_DEPENDENTE);
    
    // Al√≠quotas progressivas do IR
    if (salarioBase <= 1903.98) return 0;
    if (salarioBase <= 2826.65) return salarioBase * 0.075 - 142.80;
    if (salarioBase <= 3751.05) return salarioBase * 0.15 - 354.80;
    if (salarioBase <= 4664.68) return salarioBase * 0.225 - 636.13;
    
    return salarioBase * 0.275 - 869.36;
  }
}</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Padr√£o MVC e Componentiza√ß√£o</h3>
  <p>O padr√£o MVC (Model-View-Controller) e a componentiza√ß√£o s√£o fundamentais para criar arquiteturas JavaScript escal√°veis e manuten√≠veis.</p>
  <h4>Componentes do MVC:</h4>
  <ul class="left_list">
    <li><strong>Model:</strong> Dados e l√≥gica de neg√≥cio</li>
    <li><strong>View:</strong> Interface do usu√°rio</li>
    <li><strong>Controller:</strong> Coordena√ß√£o entre Model e View</li>
    <li><strong>Componentes:</strong> Unidades reutiliz√°veis e independentes</li>
  </ul>
</article>

<article class="item">
  <h4>Exemplos de MVC e Componentiza√ß√£o:</h4>
  <pre><code>// ‚úÖ Model - Gerenciamento de dados
class UsuarioModel {
  constructor() {
    this.usuarios = [];
    this.listeners = [];
  }
  
  adicionarListener(listener) {
    this.listeners.push(listener);
  }
  
  notificar(evento, dados) {
    this.listeners.forEach(listener => listener(evento, dados));
  }
  
  async carregarUsuarios() {
    try {
      const response = await fetch('/api/usuarios');
      this.usuarios = await response.json();
      this.notificar('usuarios-carregados', this.usuarios);
    } catch (erro) {
      this.notificar('erro-carregamento', erro);
    }
  }
  
  adicionarUsuario(usuario) {
    this.usuarios.push({
      ...usuario,
      id: Date.now(),
      criadoEm: new Date().toISOString()
    });
    this.notificar('usuario-adicionado', usuario);
  }
  
  removerUsuario(id) {
    this.usuarios = this.usuarios.filter(u => u.id !== id);
    this.notificar('usuario-removido', id);
  }
  
  atualizarUsuario(id, dados) {
    const index = this.usuarios.findIndex(u => u.id === id);
    if (index !== -1) {
      this.usuarios[index] = { ...this.usuarios[index], ...dados };
      this.notificar('usuario-atualizado', this.usuarios[index]);
    }
  }
}

// ‚úÖ View - Interface do usu√°rio
class UsuarioView {
  constructor(container) {
    this.container = container;
    this.template = this.criarTemplate();
  }
  
  criarTemplate() {
    return `
      <div class="usuarios-container">
        <div class="usuarios-header">
          <h2>Usu√°rios</h2>
          <button id="btn-adicionar" class="btn btn-primary">Adicionar Usu√°rio</button>
        </div>
        <div class="usuarios-lista" id="usuarios-lista">
          <!-- Lista ser√° preenchida dinamicamente -->
        </div>
        <div class="usuarios-form" id="usuarios-form" style="display: none;">
          <!-- Formul√°rio ser√° preenchido dinamicamente -->
        </div>
      </div>
    `;
  }
  
  render(usuarios) {
    this.container.innerHTML = this.template;
    this.atualizarLista(usuarios);
    this.configurarEventos();
  }
  
  atualizarLista(usuarios) {
    const lista = this.container.querySelector('#usuarios-lista');
    
    if (usuarios.length === 0) {
      lista.innerHTML = '<p>Nenhum usu√°rio cadastrado.</p>';
      return;
    }
    
    lista.innerHTML = usuarios.map(usuario => `
      <div class="usuario-item" data-id="${usuario.id}">
        <div class="usuario-info">
          <h3>${usuario.nome}</h3>
          <p>${usuario.email}</p>
          <small>Criado em: ${new Date(usuario.criadoEm).toLocaleDateString()}</small>
        </div>
        <div class="usuario-acoes">
          <button class="btn btn-sm btn-secondary" data-action="editar">Editar</button>
          <button class="btn btn-sm btn-danger" data-action="remover">Remover</button>
        </div>
      </div>
    `).join('');
  }
  
  mostrarFormulario(usuario = null) {
    const form = this.container.querySelector('#usuarios-form');
    const lista = this.container.querySelector('#usuarios-lista');
    
    lista.style.display = 'none';
    form.style.display = 'block';
    
    form.innerHTML = `
      <form id="form-usuario">
        <h3>${usuario ? 'Editar Usu√°rio' : 'Novo Usu√°rio'}</h3>
        <div class="form-group">
          <label for="nome">Nome:</label>
          <input type="text" id="nome" name="nome" value="${usuario?.nome || ''}" required>
        </div>
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" value="${usuario?.email || ''}" required>
        </div>
        <div class="form-group">
          <label for="telefone">Telefone:</label>
          <input type="tel" id="telefone" name="telefone" value="${usuario?.telefone || ''}">
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Salvar</button>
          <button type="button" class="btn btn-secondary" data-action="cancelar">Cancelar</button>
        </div>
      </form>
    `;
  }
  
  ocultarFormulario() {
    const form = this.container.querySelector('#usuarios-form');
    const lista = this.container.querySelector('#usuarios-lista');
    
    form.style.display = 'none';
    lista.style.display = 'block';
  }
  
  mostrarErro(mensagem) {
    // Implementar sistema de notifica√ß√µes
    console.error(mensagem);
  }
  
  configurarEventos() {
    // Delegation de eventos
    this.container.addEventListener('click', (e) => {
      const action = e.target.dataset.action;
      const usuarioId = e.target.closest('.usuario-item')?.dataset.id;
      
      switch (action) {
        case 'adicionar':
          this.mostrarFormulario();
          break;
        case 'editar':
          // Emitir evento para o controller
          this.container.dispatchEvent(new CustomEvent('editar-usuario', {
            detail: { id: usuarioId }
          }));
          break;
        case 'remover':
          this.container.dispatchEvent(new CustomEvent('remover-usuario', {
            detail: { id: usuarioId }
          }));
          break;
        case 'cancelar':
          this.ocultarFormulario();
          break;
      }
    });
    
    // Formul√°rio
    this.container.addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const dados = Object.fromEntries(formData);
      
      this.container.dispatchEvent(new CustomEvent('salvar-usuario', {
        detail: { dados }
      }));
    });
  }
}

// ‚úÖ Controller - Coordena√ß√£o
class UsuarioController {
  constructor(model, view) {
    this.model = model;
    this.view = view;
    this.usuarioEditando = null;
    
    this.init();
  }
  
  init() {
    this.model.adicionarListener((evento, dados) => {
      this.handleModelEvent(evento, dados);
    });
    
    this.view.render([]);
    this.configurarEventos();
    this.model.carregarUsuarios();
  }
  
  configurarEventos() {
    this.view.container.addEventListener('editar-usuario', (e) => {
      const { id } = e.detail;
      const usuario = this.model.usuarios.find(u => u.id == id);
      if (usuario) {
        this.usuarioEditando = usuario;
        this.view.mostrarFormulario(usuario);
      }
    });
    
    this.view.container.addEventListener('remover-usuario', (e) => {
      const { id } = e.detail;
      if (confirm('Tem certeza que deseja remover este usu√°rio?')) {
        this.model.removerUsuario(id);
      }
    });
    
    this.view.container.addEventListener('salvar-usuario', (e) => {
      const { dados } = e.detail;
      
      try {
        if (this.usuarioEditando) {
          this.model.atualizarUsuario(this.usuarioEditando.id, dados);
          this.usuarioEditando = null;
        } else {
          this.model.adicionarUsuario(dados);
        }
        
        this.view.ocultarFormulario();
      } catch (erro) {
        this.view.mostrarErro('Erro ao salvar usu√°rio: ' + erro.message);
      }
    });
  }
  
  handleModelEvent(evento, dados) {
    switch (evento) {
      case 'usuarios-carregados':
        this.view.atualizarLista(dados);
        break;
      case 'usuario-adicionado':
        this.view.atualizarLista(this.model.usuarios);
        break;
      case 'usuario-atualizado':
        this.view.atualizarLista(this.model.usuarios);
        break;
      case 'usuario-removido':
        this.view.atualizarLista(this.model.usuarios);
        break;
      case 'erro-carregamento':
        this.view.mostrarErro('Erro ao carregar usu√°rios');
        break;
    }
  }
}

// ‚úÖ Componente Reutiliz√°vel
class Modal {
  constructor(opcoes = {}) {
    this.opcoes = { ...this.defaultOptions, ...opcoes };
    this.element = null;
    this.isOpen = false;
    this.init();
  }
  
  get defaultOptions() {
    return {
      closable: true,
      size: 'medium',
      animation: true,
      backdrop: true
    };
  }
  
  init() {
    this.createElement();
    this.configurarEventos();
  }
  
  createElement() {
    this.element = document.createElement('div');
    this.element.className = 'modal-overlay';
    this.element.innerHTML = `
      <div class="modal-container modal-${this.opcoes.size}">
        <div class="modal-header">
          <h3 class="modal-title"></h3>
          ${this.opcoes.closable ? '<button class="modal-close">&times;</button>' : ''}
        </div>
        <div class="modal-body"></div>
        <div class="modal-footer"></div>
      </div>
    `;
  }
  
  configurarEventos() {
    if (this.opcoes.closable) {
      this.element.querySelector('.modal-close').addEventListener('click', () => {
        this.close();
      });
    }
    
    if (this.opcoes.backdrop) {
      this.element.addEventListener('click', (e) => {
        if (e.target === this.element) {
          this.close();
        }
      });
    }
  }
  
  show(titulo, conteudo, footer = '') {
    this.element.querySelector('.modal-title').textContent = titulo;
    this.element.querySelector('.modal-body').innerHTML = conteudo;
    this.element.querySelector('.modal-footer').innerHTML = footer;
    
    document.body.appendChild(this.element);
    this.isOpen = true;
    
    if (this.opcoes.animation) {
      this.element.classList.add('modal-show');
    }
  }
  
  close() {
    if (!this.isOpen) return;
    
    if (this.opcoes.animation) {
      this.element.classList.remove('modal-show');
      setTimeout(() => {
        this.element.remove();
      }, 300);
    } else {
      this.element.remove();
    }
    
    this.isOpen = false;
  }
}

// ‚úÖ Uso da arquitetura MVC
document.addEventListener('DOMContentLoaded', () => {
  const container = document.getElementById('app');
  
  const model = new UsuarioModel();
  const view = new UsuarioView(container);
  const controller = new UsuarioController(model, view);
});</code></pre>
</article>
</section>

<section class="container">
<article class="item">
  <h3>Projeto Final - Lista de Tarefas</h3>
  <p>Vamos criar uma aplica√ß√£o completa de lista de tarefas que demonstra todos os conceitos aprendidos: modulariza√ß√£o, MVC, componentiza√ß√£o, boas pr√°ticas e persist√™ncia local.</p>
  <h4>Funcionalidades da Aplica√ß√£o:</h4>
  <ul class="left_list">
    <li>Adicionar, editar e remover tarefas</li>
    <li>Marcar tarefas como conclu√≠das</li>
    <li>Filtrar tarefas por status</li>
    <li>Persist√™ncia local com LocalStorage</li>
    <li>Interface responsiva e acess√≠vel</li>
    <li>Anima√ß√µes e feedback visual</li>
  </ul>
</article>

<article class="item">
  <h4>Projeto Final Completo:</h4>
  <pre><code>// ‚úÖ models/TarefaModel.js
class TarefaModel {
  constructor() {
    this.tarefas = this.carregarTarefas();
    this.filtro = 'todas';
    this.listeners = [];
  }
  
  adicionarListener(listener) {
    this.listeners.push(listener);
  }
  
  notificar(evento, dados) {
    this.listeners.forEach(listener => listener(evento, dados));
  }
  
  carregarTarefas() {
    const tarefasSalvas = localStorage.getItem('tarefas');
    return tarefasSalvas ? JSON.parse(tarefasSalvas) : [];
  }
  
  salvarTarefas() {
    localStorage.setItem('tarefas', JSON.stringify(this.tarefas));
  }
  
  adicionarTarefa(texto, prioridade = 'normal') {
    const tarefa = {
      id: Date.now().toString(),
      texto: texto.trim(),
      concluida: false,
      prioridade,
      criadaEm: new Date().toISOString(),
      atualizadaEm: new Date().toISOString()
    };
    
    this.tarefas.unshift(tarefa);
    this.salvarTarefas();
    this.notificar('tarefa-adicionada', tarefa);
    return tarefa;
  }
  
  atualizarTarefa(id, dados) {
    const index = this.tarefas.findIndex(t => t.id === id);
    if (index !== -1) {
      this.tarefas[index] = {
        ...this.tarefas[index],
        ...dados,
        atualizadaEm: new Date().toISOString()
      };
      this.salvarTarefas();
      this.notificar('tarefa-atualizada', this.tarefas[index]);
      return this.tarefas[index];
    }
  }
  
  removerTarefa(id) {
    const index = this.tarefas.findIndex(t => t.id === id);
    if (index !== -1) {
      const tarefa = this.tarefas.splice(index, 1)[0];
      this.salvarTarefas();
      this.notificar('tarefa-removida', tarefa);
      return tarefa;
    }
  }
  
  alternarConclusao(id) {
    const tarefa = this.tarefas.find(t => t.id === id);
    if (tarefa) {
      return this.atualizarTarefa(id, { concluida: !tarefa.concluida });
    }
  }
  
  definirFiltro(filtro) {
    this.filtro = filtro;
    this.notificar('filtro-alterado', filtro);
  }
  
  getTarefasFiltradas() {
    switch (this.filtro) {
      case 'pendentes':
        return this.tarefas.filter(t => !t.concluida);
      case 'concluidas':
        return this.tarefas.filter(t => t.concluida);
      default:
        return this.tarefas;
    }
  }
  
  getEstatisticas() {
    const total = this.tarefas.length;
    const concluidas = this.tarefas.filter(t => t.concluida).length;
    const pendentes = total - concluidas;
    
    return { total, concluidas, pendentes };
  }
}

// ‚úÖ views/TarefaView.js
class TarefaView {
  constructor(container) {
    this.container = container;
    this.template = this.criarTemplate();
  }
  
  criarTemplate() {
    return `
      <div class="todo-app">
        <header class="todo-header">
          <h1>üìù Lista de Tarefas</h1>
          <div class="todo-stats" id="todo-stats">
            <!-- Estat√≠sticas ser√£o preenchidas dinamicamente -->
          </div>
        </header>
        
        <div class="todo-controls">
          <form id="todo-form" class="todo-form">
            <div class="form-group">
              <input 
                type="text" 
                id="todo-input" 
                placeholder="Digite uma nova tarefa..." 
                required
                autocomplete="off"
              >
              <select id="todo-priority">
                <option value="baixa">Baixa</option>
                <option value="normal" selected>Normal</option>
                <option value="alta">Alta</option>
              </select>
              <button type="submit" class="btn btn-primary">
                <span>+</span> Adicionar
              </button>
            </div>
          </form>
          
          <div class="todo-filters">
            <button class="filter-btn active" data-filter="todas">Todas</button>
            <button class="filter-btn" data-filter="pendentes">Pendentes</button>
            <button class="filter-btn" data-filter="concluidas">Conclu√≠das</button>
          </div>
        </div>
        
        <main class="todo-main">
          <div class="todo-list" id="todo-list">
            <!-- Lista de tarefas ser√° preenchida dinamicamente -->
          </div>
          
          <div class="todo-empty" id="todo-empty" style="display: none;">
            <p>üéâ Nenhuma tarefa encontrada!</p>
            <p>Adicione uma nova tarefa para come√ßar.</p>
          </div>
        </main>
        
        <footer class="todo-footer">
          <button id="clear-completed" class="btn btn-secondary">
            Limpar Conclu√≠das
          </button>
          <div class="todo-info">
            <small>Clique em uma tarefa para marc√°-la como conclu√≠da</small>
          </div>
        </footer>
      </div>
    `;
  }
  
  render() {
    this.container.innerHTML = this.template;
    this.configurarEventos();
  }
  
  atualizarLista(tarefas) {
    const lista = this.container.querySelector('#todo-list');
    const empty = this.container.querySelector('#todo-empty');
    
    if (tarefas.length === 0) {
      lista.style.display = 'none';
      empty.style.display = 'block';
      return;
    }
    
    lista.style.display = 'block';
    empty.style.display = 'none';
    
    lista.innerHTML = tarefas.map(tarefa => this.criarItemTarefa(tarefa)).join('');
  }
  
  criarItemTarefa(tarefa) {
    const prioridadeClass = `priority-${tarefa.prioridade}`;
    const concluidaClass = tarefa.concluida ? 'completed' : '';
    
    return `
      <div class="todo-item ${prioridadeClass} ${concluidaClass}" data-id="${tarefa.id}">
        <div class="todo-item-content">
          <input 
            type="checkbox" 
            class="todo-checkbox" 
            ${tarefa.concluida ? 'checked' : ''}
            aria-label="Marcar como ${tarefa.concluida ? 'pendente' : 'conclu√≠da'}"
          >
          <span class="todo-text">${this.escapeHtml(tarefa.texto)}</span>
          <div class="todo-priority-badge">
            ${this.getPrioridadeIcon(tarefa.prioridade)}
          </div>
        </div>
        
        <div class="todo-item-actions">
          <button class="btn btn-sm btn-secondary" data-action="editar" title="Editar tarefa">
            ‚úèÔ∏è
          </button>
          <button class="btn btn-sm btn-danger" data-action="remover" title="Remover tarefa">
            üóëÔ∏è
          </button>
        </div>
        
        <div class="todo-item-meta">
          <small>
            Criada em ${new Date(tarefa.criadaEm).toLocaleDateString()}
            ${tarefa.atualizadaEm !== tarefa.criadaEm ? 
              ` ‚Ä¢ Atualizada em ${new Date(tarefa.atualizadaEm).toLocaleDateString()}` : 
              ''
            }
          </small>
        </div>
      </div>
    `;
  }
  
  getPrioridadeIcon(prioridade) {
    const icons = {
      baixa: 'üîµ',
      normal: 'üü°',
      alta: 'üî¥'
    };
    return icons[prioridade] || 'üü°';
  }
  
  escapeHtml(texto) {
    const div = document.createElement('div');
    div.textContent = texto;
    return div.innerHTML;
  }
  
  atualizarEstatisticas(stats) {
    const statsElement = this.container.querySelector('#todo-stats');
    statsElement.innerHTML = `
      <div class="stat">
        <span class="stat-number">${stats.total}</span>
        <span class="stat-label">Total</span>
      </div>
      <div class="stat">
        <span class="stat-number">${stats.pendentes}</span>
        <span class="stat-label">Pendentes</span>
      </div>
      <div class="stat">
        <span class="stat-number">${stats.concluidas}</span>
        <span class="stat-label">Conclu√≠das</span>
      </div>
    `;
  }
  
  atualizarFiltros(filtroAtivo) {
    const filtros = this.container.querySelectorAll('.filter-btn');
    filtros.forEach(btn => {
      btn.classList.toggle('active', btn.dataset.filter === filtroAtivo);
    });
  }
  
  mostrarFormularioEdicao(tarefa) {
    const item = this.container.querySelector(`[data-id="${tarefa.id}"]`);
    const textElement = item.querySelector('.todo-text');
    
    const input = document.createElement('input');
    input.type = 'text';
    input.value = tarefa.texto;
    input.className = 'todo-edit-input';
    
    const salvar = () => {
      const novoTexto = input.value.trim();
      if (novoTexto && novoTexto !== tarefa.texto) {
        this.container.dispatchEvent(new CustomEvent('editar-tarefa', {
          detail: { id: tarefa.id, texto: novoTexto }
        }));
      }
      textElement.textContent = tarefa.texto;
    };
    
    const cancelar = () => {
      textElement.textContent = tarefa.texto;
    };
    
    input.addEventListener('blur', salvar);
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        salvar();
      } else if (e.key === 'Escape') {
        cancelar();
      }
    });
    
    textElement.style.display = 'none';
    item.querySelector('.todo-item-content').insertBefore(input, textElement);
    input.focus();
    input.select();
  }
  
  configurarEventos() {
    // Formul√°rio de nova tarefa
    this.container.querySelector('#todo-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const input = this.container.querySelector('#todo-input');
      const prioridade = this.container.querySelector('#todo-priority').value;
      
      const texto = input.value.trim();
      if (texto) {
        this.container.dispatchEvent(new CustomEvent('adicionar-tarefa', {
          detail: { texto, prioridade }
        }));
        input.value = '';
      }
    });
    
    // Filtros
    this.container.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        this.container.dispatchEvent(new CustomEvent('alterar-filtro', {
          detail: { filtro: btn.dataset.filter }
        }));
      });
    });
    
    // A√ß√µes nas tarefas (delegation)
    this.container.addEventListener('click', (e) => {
      const item = e.target.closest('.todo-item');
      if (!item) return;
      
      const id = item.dataset.id;
      const action = e.target.dataset.action;
      
      if (e.target.classList.contains('todo-checkbox')) {
        this.container.dispatchEvent(new CustomEvent('alternar-conclusao', {
          detail: { id }
        }));
      } else if (action === 'editar') {
        this.container.dispatchEvent(new CustomEvent('editar-tarefa', {
          detail: { id }
        }));
      } else if (action === 'remover') {
        if (confirm('Tem certeza que deseja remover esta tarefa?')) {
          this.container.dispatchEvent(new CustomEvent('remover-tarefa', {
            detail: { id }
          }));
        }
      }
    });
    
    // Limpar conclu√≠das
    this.container.querySelector('#clear-completed').addEventListener('click', () => {
      this.container.dispatchEvent(new CustomEvent('limpar-concluidas'));
    });
  }
}

// ‚úÖ controllers/TarefaController.js
class TarefaController {
  constructor(model, view) {
    this.model = model;
    this.view = view;
    
    this.init();
  }
  
  init() {
    this.model.adicionarListener((evento, dados) => {
      this.handleModelEvent(evento, dados);
    });
    
    this.view.render();
    this.configurarEventos();
    this.atualizarView();
  }
  
  configurarEventos() {
    this.view.container.addEventListener('adicionar-tarefa', (e) => {
      const { texto, prioridade } = e.detail;
      this.model.adicionarTarefa(texto, prioridade);
    });
    
    this.view.container.addEventListener('alternar-conclusao', (e) => {
      const { id } = e.detail;
      this.model.alternarConclusao(id);
    });
    
    this.view.container.addEventListener('editar-tarefa', (e) => {
      const { id, texto } = e.detail;
      
      if (texto !== undefined) {
        this.model.atualizarTarefa(id, { texto });
      } else {
        const tarefa = this.model.tarefas.find(t => t.id === id);
        if (tarefa) {
          this.view.mostrarFormularioEdicao(tarefa);
        }
      }
    });
    
    this.view.container.addEventListener('remover-tarefa', (e) => {
      const { id } = e.detail;
      this.model.removerTarefa(id);
    });
    
    this.view.container.addEventListener('alterar-filtro', (e) => {
      const { filtro } = e.detail;
      this.model.definirFiltro(filtro);
    });
    
    this.view.container.addEventListener('limpar-concluidas', () => {
      if (confirm('Tem certeza que deseja remover todas as tarefas conclu√≠das?')) {
        const tarefasConcluidas = this.model.tarefas.filter(t => t.concluida);
        tarefasConcluidas.forEach(t => this.model.removerTarefa(t.id));
      }
    });
  }
  
  handleModelEvent(evento, dados) {
    switch (evento) {
      case 'tarefa-adicionada':
      case 'tarefa-atualizada':
      case 'tarefa-removida':
      case 'filtro-alterado':
        this.atualizarView();
        break;
    }
  }
  
  atualizarView() {
    const tarefas = this.model.getTarefasFiltradas();
    const stats = this.model.getEstatisticas();
    
    this.view.atualizarLista(tarefas);
    this.view.atualizarEstatisticas(stats);
    this.view.atualizarFiltros(this.model.filtro);
  }
}

// ‚úÖ styles/todo.css
const todoCSS = `
  .todo-app {
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }
  
  .todo-header {
    text-align: center;
    margin-bottom: 30px;
  }
  
  .todo-header h1 {
    margin: 0 0 20px 0;
    color: #2c3e50;
  }
  
  .todo-stats {
    display: flex;
    justify-content: center;
    gap: 20px;
  }
  
  .stat {
    text-align: center;
  }
  
  .stat-number {
    display: block;
    font-size: 24px;
    font-weight: bold;
    color: #3498db;
  }
  
  .stat-label {
    font-size: 12px;
    color: #7f8c8d;
    text-transform: uppercase;
  }
  
  .todo-form .form-group {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }
  
  .todo-form input,
  .todo-form select {
    flex: 1;
    padding: 12px;
    border: 2px solid #ecf0f1;
    border-radius: 6px;
    font-size: 16px;
  }
  
  .todo-form input:focus,
  .todo-form select:focus {
    outline: none;
    border-color: #3498db;
  }
  
  .todo-filters {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }
  
  .filter-btn {
    padding: 8px 16px;
    border: 2px solid #ecf0f1;
    background: white;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .filter-btn.active {
    background: #3498db;
    color: white;
    border-color: #3498db;
  }
  
  .todo-item {
    background: white;
    border: 1px solid #ecf0f1;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 10px;
    transition: all 0.2s;
  }
  
  .todo-item:hover {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .todo-item.completed {
    opacity: 0.6;
  }
  
  .todo-item.completed .todo-text {
    text-decoration: line-through;
    color: #7f8c8d;
  }
  
  .todo-item-content {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .todo-checkbox {
    width: 18px;
    height: 18px;
    cursor: pointer;
  }
  
  .todo-text {
    flex: 1;
    font-size: 16px;
  }
  
  .todo-priority-badge {
    font-size: 12px;
  }
  
  .priority-alta {
    border-left: 4px solid #e74c3c;
  }
  
  .priority-normal {
    border-left: 4px solid #f39c12;
  }
  
  .priority-baixa {
    border-left: 4px solid #27ae60;
  }
  
  .todo-item-actions {
    display: flex;
    gap: 5px;
    margin-top: 10px;
  }
  
  .todo-item-meta {
    margin-top: 10px;
    color: #7f8c8d;
  }
  
  .todo-empty {
    text-align: center;
    padding: 40px;
    color: #7f8c8d;
  }
  
  .btn {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s;
  }
  
  .btn-primary {
    background: #3498db;
    color: white;
  }
  
  .btn-primary:hover {
    background: #2980b9;
  }
  
  .btn-secondary {
    background: #95a5a6;
    color: white;
  }
  
  .btn-danger {
    background: #e74c3c;
    color: white;
  }
  
  .btn-sm {
    padding: 5px 10px;
    font-size: 12px;
  }
  
  .todo-edit-input {
    flex: 1;
    padding: 8px;
    border: 2px solid #3498db;
    border-radius: 4px;
    font-size: 16px;
  }
  
  @media (max-width: 600px) {
    .todo-app {
      padding: 10px;
    }
    
    .todo-form .form-group {
      flex-direction: column;
    }
    
    .todo-stats {
      flex-direction: column;
      gap: 10px;
    }
    
    .todo-item-actions {
      justify-content: center;
    }
  }
`;

// ‚úÖ Inicializa√ß√£o da aplica√ß√£o
document.addEventListener('DOMContentLoaded', () => {
  // Adicionar CSS
  const style = document.createElement('style');
  style.textContent = todoCSS;
  document.head.appendChild(style);
  
  // Criar inst√¢ncias
  const model = new TarefaModel();
  const view = new TarefaView(document.getElementById('app'));
  const controller = new TarefaController(model, view);
  
  // Tornar dispon√≠vel globalmente para debugging
  window.todoApp = { model, view, controller };
});</code></pre>

  <picture>
    <source media="(min-width: 1024px)" srcset="/vitrine-ml5/mlab5/cursos/javascript/07/images/projeto_final_desktop.png">
    <source media="(min-width: 600px)" srcset="/vitrine-ml5/mlab5/cursos/javascript/07/images/projeto_final_tablet.png">
    <img src="/vitrine-ml5/mlab5/cursos/javascript/07/images/projeto_final_mobile.png">
  </picture>
</article>
</section>

<span id="exercicio">
<p>Crie uma aplica√ß√£o web completa seguindo boas pr√°ticas e arquitetura moderna:<p>
  <ul>
  <li>T√≠tulo = Aplica√ß√£o Web com Arquitetura Moderna<br></li>
  <li>Implemente modulariza√ß√£o com ES6 modules<br></li>
  <li>Use padr√£o MVC para organiza√ß√£o<br></li>
  <li>Aplique princ√≠pios de Clean Code<br></li>
  <li>Crie componentes reutiliz√°veis<br></li>
  <li>Implemente persist√™ncia local<br></li>
  <li>Adicione testes unit√°rios b√°sicos<br></li>
</ul>
</p>Inclua funcionalidades como autentica√ß√£o, dashboard, relat√≥rios e configura√ß√µes do usu√°rio.</p>
</span>

  <form id="controles">
    <fieldset>
      <legend>Controles</legend>
    <h4>Escolha um template</h4>
    <select id="templateSelect">
      <option value="/vitrine-ml5/mlab5/templates/classico.html">Classico</option>
      <option value="/vitrine-ml5/mlab5/templates/moderno.html">Moderno</option>
      <option value="/vitrine-ml5/mlab5/templates/dark_mode.html">Dark Mode3</option>
    </select>

    <h4>Personalize</h4>
    <label>Cor de fundo: <input type="color" id="bgColor" value="#ffffff"></label><br>
    <label>Cor do texto: <input type="color" id="textColor" value="#000000"></label><br><br>

    <label>Fonte:
      <select id="fontFamily">
        <option value="Arial, sans-serif">Arial</option>
        <option value="Georgia, serif">Georgia</option>
        <option value="'Courier New', monospace">Courier New</option>
      </select><br>
    </label><br><br>
    </fieldset><br>
    <button onclick="salvarCustomizacao()">Salvar e Visualizar</button>
  </form>

<section class="container">
<article class="item">
    <a href="/vitrine-ml5/mlab5/playground" id="download-button" class="btn-large waves-effect waves-light teal lighten-1" >Playground</a>
</article>
</section>

</main>

<div id="footer-placeholder"></div>

<script>
  async function loadComponent(placeholderId, url) {
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error(`Erro ao carregar ${url}`);
      const html = await response.text();
      document.getElementById(placeholderId).innerHTML = html;
    } catch (error) {
      console.error(error);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    loadComponent('header-placeholder', '/vitrine-ml5/mlab5/js/ui/components/header.html')
      .then(() => {
        const script = document.createElement('script');
        script.src = '/vitrine-ml5/mlab5/js/ui/components/navbar.js';
        document.body.appendChild(script);
      })
      .catch(error => {
        console.error("Erro ao carregar o header:", error);
      });

    loadComponent('footer-placeholder', '/vitrine-ml5/mlab5/js/ui/components/footer.html');
  });

  document.addEventListener('DOMContentLoaded', () => {
    const exercicio = document.getElementById('exercicio')?.innerText || "";
    const playgroundLink = document.querySelector('a[href="/vitrine-ml5/mlab5/playground"]'); 

    if (playgroundLink) {
      playgroundLink.addEventListener('click', (event) => {
        event.preventDefault();

        // Salva o texto das instru√ß√µes
        localStorage.setItem('instrucoes', exercicio);

        // Salva o HTML do formul√°rio inteiro
        const controles = document.getElementById('controles');
        localStorage.setItem('ajustes', controles.outerHTML);

        // Redireciona para o playground
        window.location.href = playgroundLink.href;
      });
    }
  });
</script>

</body>
</html>
